
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>3. API를 이용한 데이터 수집</title>
    
  <link rel="stylesheet" href="_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script kind="utterances">

    var commentsRunWhenDOMLoaded = cb => {
    if (document.readyState != 'loading') {
        cb()
    } else if (document.addEventListener) {
        document.addEventListener('DOMContentLoaded', cb)
    } else {
        document.attachEvent('onreadystatechange', function() {
        if (document.readyState == 'complete') cb()
        })
    }
}

var addUtterances = () => {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "https://utteranc.es/client.js";
    script.async = "async";

    script.setAttribute("repo", "hyunyulhenry/quant_python");
    script.setAttribute("issue-term", "pathname");
    script.setAttribute("theme", "github-light");
    script.setAttribute("label", "💬 comment");
    script.setAttribute("crossorigin", "anonymous");

    sections = document.querySelectorAll("div.section");
    if (sections !== null) {
        section = sections[sections.length-1];
        section.appendChild(script);
    }
}
commentsRunWhenDOMLoaded(addUtterances);
</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="4. 크롤링 이해하기" href="04_crawl.html" />
    <link rel="prev" title="2. 크롤링을 위한 기본 지식" href="02_information.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  <img src="_static/logo.png" class="logo" alt="logo">
  
  
</a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="index.html">
   파이썬을 이용한 퀀트 투자 포트폴리오 만들기
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="01_data_programming.html">
   1. 퀀트 투자의 심장: 데이터와 프로그래밍
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02_information.html">
   2. 크롤링을 위한 기본 지식
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   3. API를 이용한 데이터 수집
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="04_crawl.html">
   4. 크롤링 이해하기
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="05_crawl_practice.html">
   5. 금융 데이터 수집하기 (기본)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="06_crawl_actual.html">
   6. 금융 데이터 수집하기 (심화)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="07_hts_api.html">
   7. 증권사 API 연결 및 매매
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="08_us_data.html">
   8. 미국 주식 데이터 수집하기
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="09_other_data.html">
   9. 투자 참고용 데이터 수집하기
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="10_bind_data.html">
   10. 데이터 정리하기
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="11_data_analysis.html">
   11. 데이터 분석 및 시각화하기
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="12_factor_basic.html">
   12. 퀀트 전략을 이용한 종목선정 (기본)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="13_factor_advanced.html">
   13. 퀀트 전략을 이용한 종목선정 (심화)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="14_portfolio.html">
   14. 포트폴리오 구성 전략
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="15_trading.html">
   15. 트레이딩 전략을 위한 기술적 지표
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="16_backtest.html">
   16. 백테스팅 시뮬레이션
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/03_api.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/hyunyulhenry/quant_python/master?urlpath=tree/03_api.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#api-quandl">
   3.1 API를 이용한 Quandl 데이터 다운로드
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#datareader">
   3.2 DataReader() 함수를 데이터 다운로드
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id2">
     3.2.1 주가 다운로드
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id3">
     3.2.2 국내 종목 주가 다운로드
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#fred">
     3.2.3 FRED 데이터 다운로드
    </a>
   </li>
  </ul>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="api">
<h1>3. API를 이용한 데이터 수집<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<p>이번 장에서 부터는 본격적으로 데이터를 수집하는 방법을 배우겠습니다. 먼저 API를 이용해 데이터를 수집하는 방법을 살펴봅니다.</p>
<p>API 제공자는 본인이 가진 데이터베이스를 다른 누군가가 쉽게 사용할 수 있는 형태로 가지고 있으며, 해당 데이터베이스에 접근할 수 있는 열쇠인 API 주소를 가진 사람은 이를 언제든지 사용할 수 있습니다.</p>
<div class="figure align-default" id="id1">
<img alt="_images/03_api.png" src="_images/03_api.png" />
<p class="caption"><span class="caption-number">Fig. 18 </span><span class="caption-text">API 개념</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>API는 API 주소만 가지고 있다면 데이터를 언제, 어디서, 누구나 쉽게 이용할 수 있다는 장점이 있습니다. 또한 대부분의 경우 사용자가 필요한 데이터만을 가지고 있으므로 접속 속도가 빠르며, 데이터를 가공하는 번거로움도 줄어듭니다. 해외에는 금융 데이터를 API의 형태로 제공하는 업체가 많으므로, 이를 잘만 활용한다면 매우 손쉽게 퀀트 투자에 필요한 데이터를 수집할 수 있습니다.</p>
<div class="section" id="api-quandl">
<h2>3.1 API를 이용한 Quandl 데이터 다운로드<a class="headerlink" href="#api-quandl" title="Permalink to this headline">¶</a></h2>
<p>데이터 제공업체 Quandl은 일부 데이터를 무료로 제공하며 API를 통해서 다운로드할 수 있습니다. 이 책에서는 예제로 애플(AAPL)의 주가를 다운로드 해보겠습니다. csv 형식의 API 주소는 다음과 같습니다.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>https://www.quandl.com/api/v3/datasets/WIKI/AAPL/data.csv?api_key=xw3NU3xLUZ7vZgrz5QnG
</pre></div>
</div>
<p>위 주소를 웹 브라우저 주소 창에 직접 입력하면 csv 형식의 파일이 다운로드되며, 파일을 열어보면 애플의 주가 데이터가 있습니다.</p>
<div class="figure align-default" id="apple-csv">
<img alt="_images/03_apple_csv.png" src="_images/03_apple_csv.png" />
<p class="caption"><span class="caption-number">Fig. 19 </span><span class="caption-text">API 주소를 이용한 데이터 다운로드</span><a class="headerlink" href="#apple-csv" title="Permalink to this image">¶</a></p>
</div>
<p>그러나 웹 브라우저에 해당 주소를 입력해 csv 파일을 다운로드하고 csv 파일을 다시 파이썬에서 불러오는 작업은 무척이나 비효율적입니다. 파이썬에서 API 주소를 이용해 직접 데이터를 다운로드 하겠습니다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">url_aapl</span> <span class="o">=</span> <span class="s1">&#39;https://www.quandl.com/api/v3/datasets/WIKI/AAPL/data.csv?api_key=xw3NU3xLUZ7vZgrz5QnG&#39;</span>
<span class="n">data_aapl</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url_aapl</span><span class="p">)</span>

<span class="n">data_aapl</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>Open</th>
      <th>High</th>
      <th>Low</th>
      <th>Close</th>
      <th>Volume</th>
      <th>Ex-Dividend</th>
      <th>Split Ratio</th>
      <th>Adj. Open</th>
      <th>Adj. High</th>
      <th>Adj. Low</th>
      <th>Adj. Close</th>
      <th>Adj. Volume</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2018-03-27</td>
      <td>173.68</td>
      <td>175.15</td>
      <td>166.92</td>
      <td>168.340</td>
      <td>38962839.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>173.68</td>
      <td>175.15</td>
      <td>166.92</td>
      <td>168.340</td>
      <td>38962839.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2018-03-26</td>
      <td>168.07</td>
      <td>173.10</td>
      <td>166.44</td>
      <td>172.770</td>
      <td>36272617.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>168.07</td>
      <td>173.10</td>
      <td>166.44</td>
      <td>172.770</td>
      <td>36272617.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2018-03-23</td>
      <td>168.39</td>
      <td>169.92</td>
      <td>164.94</td>
      <td>164.940</td>
      <td>40248954.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>168.39</td>
      <td>169.92</td>
      <td>164.94</td>
      <td>164.940</td>
      <td>40248954.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2018-03-22</td>
      <td>170.00</td>
      <td>172.68</td>
      <td>168.60</td>
      <td>168.845</td>
      <td>41051076.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>170.00</td>
      <td>172.68</td>
      <td>168.60</td>
      <td>168.845</td>
      <td>41051076.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2018-03-21</td>
      <td>175.04</td>
      <td>175.09</td>
      <td>171.26</td>
      <td>171.270</td>
      <td>35247358.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>175.04</td>
      <td>175.09</td>
      <td>171.26</td>
      <td>171.270</td>
      <td>35247358.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>url에 해당 주소를 입력한 후 pandas의 <code class="docutils literal notranslate"><span class="pre">read_csv()</span></code> 함수를 이용해 간단하게 csv 파일을 불러올 수 있습니다.</p>
</div>
<div class="section" id="datareader">
<h2>3.2 DataReader() 함수를 데이터 다운로드<a class="headerlink" href="#datareader" title="Permalink to this headline">¶</a></h2>
<p>이전 예에서 API 주소를 이용하면 매우 간단하게 데이터를 수집할 수 있음을 살펴보았습니다. 그러나 이 방법에는 단점도 있습니다. 먼저 원하는 항목에 대한 API를 일일이 얻기가 힘듭니다. 또한 Quandl의 경우 무료로 얻을 수 있는 정보에 제한이 있으며, 다운로드 양에도 제한이 있습니다. 이 방법으로 한두 종목의 데이터를 수집할 수 있지만, 전 종목의 데이터를 구하기는 사실상 불가능합니다.</p>
<p>다행히 야후 파이낸스 역시 주가 데이터를 무료로 제공하며, pandas_datareader 패키지의 <code class="docutils literal notranslate"><span class="pre">DataReader()</span></code> 함수는 해당 API에 접속해 데이터를 다운로드합니다.</p>
<div class="section" id="id2">
<h3>3.2.1 주가 다운로드<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">DataReader()</span></code> 함수의 기본적인 사용법은 매우 간단합니다. 괄호 안에 다운로드하려는 종목의 티커와, 데이터 소스를 입력합니다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas_datareader</span> <span class="k">as</span> <span class="nn">web</span>

<span class="n">AAPL</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">DataReader</span><span class="p">(</span><span class="s1">&#39;AAPL&#39;</span><span class="p">,</span> <span class="s1">&#39;yahoo&#39;</span><span class="p">)</span>
<span class="n">AAPL</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>High</th>
      <th>Low</th>
      <th>Open</th>
      <th>Close</th>
      <th>Volume</th>
      <th>Adj Close</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2016-04-11</th>
      <td>27.652500</td>
      <td>27.207500</td>
      <td>27.242500</td>
      <td>27.254999</td>
      <td>117630000.0</td>
      <td>25.350115</td>
    </tr>
    <tr>
      <th>2016-04-12</th>
      <td>27.625000</td>
      <td>27.165001</td>
      <td>27.334999</td>
      <td>27.610001</td>
      <td>108929200.0</td>
      <td>25.680305</td>
    </tr>
    <tr>
      <th>2016-04-13</th>
      <td>28.084999</td>
      <td>27.700001</td>
      <td>27.700001</td>
      <td>28.010000</td>
      <td>133029200.0</td>
      <td>26.052345</td>
    </tr>
    <tr>
      <th>2016-04-14</th>
      <td>28.097500</td>
      <td>27.832500</td>
      <td>27.905001</td>
      <td>28.025000</td>
      <td>101895600.0</td>
      <td>26.066298</td>
    </tr>
    <tr>
      <th>2016-04-15</th>
      <td>28.075001</td>
      <td>27.432501</td>
      <td>28.027500</td>
      <td>27.462500</td>
      <td>187756000.0</td>
      <td>25.543112</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">AAPL</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>pandas.core.frame.DataFrame
</pre></div>
</div>
</div>
</div>
<p>먼저 <code class="docutils literal notranslate"><span class="pre">DataReader()</span></code> 함수 내에 애플의 티커인 AAPL과 데이터 소스인 yahoo를 입력합니다. 주가 데이터가 DataFrame 형태로 다운로드 됩니다.</p>
<p>다운로드 결과로 총 6개의 열이 생성됩니다. High는 고가, Low는 저가, Open은 시가, Close는 종가를 의미합니다. 또한 Volume은 거래량을 의미하며, Adjusted는 배당이 반영된 수정주가를 의미합니다. 이 중 가장 많이 사용되는 데이터는 Adjusted, 즉 배당이 반영된 수정주가입니다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">AAPL</span><span class="p">[</span><span class="s1">&#39;Adj Close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/03_api_13_0.png" src="_images/03_api_13_0.png" />
</div>
</div>
<p>수정주가에 해당하는 Adj Close 열을 선택한 후 시계열 그래프를 그릴 수도 있습니다. 시계열 기간을 입력하지 않으면 2016년부터 현재까지의 데이터가 다운로드되며, 입력 변수를 추가하여 원하는 기간의 데이터를 다운로드할 수도 있습니다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">AAPL_long</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">DataReader</span><span class="p">(</span><span class="s1">&#39;AAPL&#39;</span><span class="p">,</span> <span class="s1">&#39;yahoo&#39;</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="s1">&#39;2000-01-01&#39;</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="s1">&#39;2010-12-31&#39;</span><span class="p">)</span>

<span class="n">AAPL_long</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>High</th>
      <th>Low</th>
      <th>Open</th>
      <th>Close</th>
      <th>Volume</th>
      <th>Adj Close</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1999-12-31</th>
      <td>0.918527</td>
      <td>0.888393</td>
      <td>0.901228</td>
      <td>0.917969</td>
      <td>163811200.0</td>
      <td>0.790705</td>
    </tr>
    <tr>
      <th>2000-01-03</th>
      <td>1.004464</td>
      <td>0.907924</td>
      <td>0.936384</td>
      <td>0.999442</td>
      <td>535796800.0</td>
      <td>0.860883</td>
    </tr>
    <tr>
      <th>2000-01-04</th>
      <td>0.987723</td>
      <td>0.903460</td>
      <td>0.966518</td>
      <td>0.915179</td>
      <td>512377600.0</td>
      <td>0.788302</td>
    </tr>
    <tr>
      <th>2000-01-05</th>
      <td>0.987165</td>
      <td>0.919643</td>
      <td>0.926339</td>
      <td>0.928571</td>
      <td>778321600.0</td>
      <td>0.799837</td>
    </tr>
    <tr>
      <th>2000-01-06</th>
      <td>0.955357</td>
      <td>0.848214</td>
      <td>0.947545</td>
      <td>0.848214</td>
      <td>767972800.0</td>
      <td>0.730621</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">AAPL_long</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>High</th>
      <th>Low</th>
      <th>Open</th>
      <th>Close</th>
      <th>Volume</th>
      <th>Adj Close</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2010-12-27</th>
      <td>11.622857</td>
      <td>11.482857</td>
      <td>11.530357</td>
      <td>11.595714</td>
      <td>249816000.0</td>
      <td>9.988124</td>
    </tr>
    <tr>
      <th>2010-12-28</th>
      <td>11.666429</td>
      <td>11.609286</td>
      <td>11.639643</td>
      <td>11.623929</td>
      <td>175924000.0</td>
      <td>10.012430</td>
    </tr>
    <tr>
      <th>2010-12-29</th>
      <td>11.658929</td>
      <td>11.610714</td>
      <td>11.650714</td>
      <td>11.617500</td>
      <td>163139200.0</td>
      <td>10.006890</td>
    </tr>
    <tr>
      <th>2010-12-30</th>
      <td>11.625357</td>
      <td>11.537500</td>
      <td>11.624286</td>
      <td>11.559286</td>
      <td>157494400.0</td>
      <td>9.956747</td>
    </tr>
    <tr>
      <th>2010-12-31</th>
      <td>11.552857</td>
      <td>11.475357</td>
      <td>11.533929</td>
      <td>11.520000</td>
      <td>193508000.0</td>
      <td>9.922909</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>start에는 시작시점을 입력하고 end에는 종료시점을 입력하면 해당 기간의 데이터가 다운로드됩니다.</p>
<p>한 번에 여러 종목의 주가를 다운로드할 수도 있습니다. 위 예제와 같이 페이스북과 엔비디아의 티커인 FB와 NVDA를 tickers 변수에 입력하고 <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">loop</span></code> 구문을 이용하면 두 종목의 주가가 순차적으로 다운로드됩니다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tickers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;FB&#39;</span><span class="p">,</span> <span class="s1">&#39;NVDA&#39;</span><span class="p">]</span>

<span class="n">all_data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">ticker</span> <span class="ow">in</span> <span class="n">tickers</span><span class="p">:</span>
    <span class="n">all_data</span><span class="p">[</span><span class="n">ticker</span><span class="p">]</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">DataReader</span><span class="p">(</span><span class="n">ticker</span><span class="p">,</span> <span class="s1">&#39;yahoo&#39;</span><span class="p">)</span>
    
<span class="n">all_data</span>    
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;FB&#39;:                   High         Low        Open       Close    Volume  \
 Date                                                                   
 2016-04-11  110.910004  108.769997  110.699997  108.989998  39762300   
 2016-04-12  111.160004  108.989998  109.339996  110.610001  26248100   
 2016-04-13  112.650002  106.519997  112.230003  110.510002  88227400   
 2016-04-14  112.040001  110.260002  110.620003  110.839996  28473300   
 2016-04-15  110.970001  109.199997  110.790001  109.639999  20922800   
 ...                ...         ...         ...         ...       ...   
 2021-04-01  302.399994  296.600006  298.399994  298.660004  17590700   
 2021-04-05  310.769989  300.679993  300.890015  308.910004  28237000   
 2021-04-06  311.350006  305.250000  308.839996  306.260010  17335200   
 2021-04-07  314.250000  305.500000  306.339996  313.089996  22855200   
 2021-04-08  315.880005  310.049988  314.850006  313.019989  20860700   
 
              Adj Close  
 Date                    
 2016-04-11  108.989998  
 2016-04-12  110.610001  
 2016-04-13  110.510002  
 2016-04-14  110.839996  
 2016-04-15  109.639999  
 ...                ...  
 2021-04-01  298.660004  
 2021-04-05  308.910004  
 2021-04-06  306.260010  
 2021-04-07  313.089996  
 2021-04-08  313.019989  
 
 [1258 rows x 6 columns],
 &#39;NVDA&#39;:                   High         Low        Open       Close      Volume  \
 Date                                                                     
 2016-04-11   36.470001   35.759998   35.869999   35.880001   9688100.0   
 2016-04-12   36.049999   35.139999   36.000000   35.840000   7319100.0   
 2016-04-13   36.750000   36.000000   36.000000   36.740002   8767900.0   
 2016-04-14   37.000000   36.490002   36.639999   36.840000  10414100.0   
 2016-04-15   37.459999   36.709999   36.830002   37.130001  10924300.0   
 ...                ...         ...         ...         ...         ...   
 2021-04-01  554.799988  540.450012  542.890015  552.469971   7706900.0   
 2021-04-05  560.559998  549.320007  554.700012  559.500000   6391800.0   
 2021-04-06  562.169983  550.940002  559.989990  554.460022   4793600.0   
 2021-04-07  569.739990  548.460022  555.229980  565.739990   6282100.0   
 2021-04-08  578.859985  569.960022  570.109985  572.679993   6097900.0   
 
              Adj Close  
 Date                    
 2016-04-11   35.234581  
 2016-04-12   35.195301  
 2016-04-13   36.079113  
 2016-04-14   36.177315  
 2016-04-15   36.462097  
 ...                ...  
 2021-04-01  552.469971  
 2021-04-05  559.500000  
 2021-04-06  554.460022  
 2021-04-07  565.739990  
 2021-04-08  572.679993  
 
 [1258 rows x 6 columns]}
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id3">
<h3>3.2.2 국내 종목 주가 다운로드<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">DataReader()</span></code> 함수를 이용하면 미국뿐 아니라 국내 종목의 주가도 다운로드할 수 있습니다. 국내 종목의 티커는 총 6자리로 구성되어 있으며, 해당 함수에 입력되는 티커는 <strong>코스피 상장 종목의 경우 티커.KS, 코스닥 상장 종목의 경우 티커.KQ</strong>의 형태로 입력해야 합니다.</p>
<p>다음은 코스피 상장 종목인 삼성전자 데이터의 다운로드 예시입니다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">samsung</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">DataReader</span><span class="p">(</span><span class="s1">&#39;005930.KS&#39;</span><span class="p">,</span> <span class="s1">&#39;yahoo&#39;</span><span class="p">)</span>

<span class="n">samsung</span><span class="p">[</span><span class="s1">&#39;Adj Close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Date
2021-04-05    85400.0
2021-04-06    86000.0
2021-04-07    85600.0
2021-04-08    84700.0
2021-04-09    83600.0
Name: Adj Close, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>삼성전자의 티커인 005930에 .KS를 붙여 <code class="docutils literal notranslate"><span class="pre">DataReader()</span></code> 함수에 입력하면 국내 종목 역시 데이터가 다운로드 됩니다. 야후 파이낸스의 경우 국내 종목은 종종 수정주가에 오류가 발생하는 경우가 많아서 배당이 반영된 값보다는 단순 종가(Close) 데이터를 사용하기를 권장합니다. 단순 종가를 사용할 경우 비록 배당을 고려할 수는 없지만, 전반적으로 오류가 없는 데이터를 사용할 수 있습니다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">samsung</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Date
2021-04-05    85400.0
2021-04-06    86000.0
2021-04-07    85600.0
2021-04-08    84700.0
2021-04-09    83600.0
Name: Close, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>다음은 코스닥 상장종목인 셀트리온제약의 예시이며, 티커인 068670에 .KQ를 붙여 함수에 입력합니다. 역시나 데이터가 다운로드 됩니다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cell_pharm</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">DataReader</span><span class="p">(</span><span class="s1">&#39;068760.KQ&#39;</span><span class="p">,</span> <span class="s1">&#39;yahoo&#39;</span><span class="p">)</span>

<span class="n">cell_pharm</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Date
2018-01-26     97400.0
2018-01-29     99900.0
2018-01-30     99500.0
2018-01-31     97500.0
2021-04-09    143700.0
Name: Close, dtype: float64
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="fred">
<h3>3.2.3 FRED 데이터 다운로드<a class="headerlink" href="#fred" title="Permalink to this headline">¶</a></h3>
<p>미국 연방준비은행에서 관리하는 Federal Reserve Economic Data(FRED)는 미국 및 각국의 중요 경제지표 데이터를 살펴볼 때 가장 많이 참조되는 곳 중 하나이며, 역시나 <code class="docutils literal notranslate"><span class="pre">DataReader()</span></code> 함수를 이용해 FRED 데이터를 다운로드할 수 있습니다. 먼저 미 국채 10년물 금리를 다운로드하는 예제를 살펴보겠습니다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas_datareader</span> <span class="k">as</span> <span class="nn">web</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">DataReader</span><span class="p">(</span><span class="s1">&#39;DGS10&#39;</span><span class="p">,</span> <span class="s1">&#39;fred&#39;</span><span class="p">,</span> <span class="s1">&#39;1960-01-01&#39;</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>DGS10</th>
    </tr>
    <tr>
      <th>DATE</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1962-01-02</th>
      <td>4.06</td>
    </tr>
    <tr>
      <th>1962-01-03</th>
      <td>4.03</td>
    </tr>
    <tr>
      <th>1962-01-04</th>
      <td>3.99</td>
    </tr>
    <tr>
      <th>1962-01-05</th>
      <td>4.02</td>
    </tr>
    <tr>
      <th>1962-01-08</th>
      <td>4.03</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">data</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/03_api_29_0.png" src="_images/03_api_29_0.png" />
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">DataReader()</span></code> 함수 내에 미 국채 10년물 금리에 해당하는 티커인 DGS10을 입력하면, FRED에서 제공하는 API를 이용해 데이터가 다운로드됩니다.</p>
<p>각 항목별 티커를 찾는 방법은 매우 간단합니다. 먼저 FRED 웹사이트(https://fred.stlouisfed.org/) 에서 원하는 데이터를 검색합니다. 만일 원/달러 환율에 해당하는 티커를 찾고자 한다면 <a class="reference internal" href="#api-fred"><span class="std std-numref">Fig. 20</span></a>와 같이 이에 해당하는 South Korea / U.S. Foreign Exchange Rate를 검색해 원하는 페이지에 접속합니다. 이 중 페이지 주소에서 <strong>/series/ 다음에 위치하는 DEXKOUS</strong>가 해당 항목의 티커입니다.</p>
<div class="figure align-default" id="api-fred">
<img alt="_images/03_api_fred.png" src="_images/03_api_fred.png" />
<p class="caption"><span class="caption-number">Fig. 20 </span><span class="caption-text">FRED 사이트 내 원/달러 환율의 티커 확인</span><a class="headerlink" href="#api-fred" title="Permalink to this image">¶</a></p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fx</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">DataReader</span><span class="p">(</span><span class="s1">&#39;DEXKOUS&#39;</span><span class="p">,</span> <span class="s1">&#39;fred&#39;</span><span class="p">,</span> <span class="s1">&#39;1960-01-01&#39;</span><span class="p">)</span>
<span class="n">fx</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>DEXKOUS</th>
    </tr>
    <tr>
      <th>DATE</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2021-03-29</th>
      <td>1133.57</td>
    </tr>
    <tr>
      <th>2021-03-30</th>
      <td>1133.44</td>
    </tr>
    <tr>
      <th>2021-03-31</th>
      <td>1126.72</td>
    </tr>
    <tr>
      <th>2021-04-01</th>
      <td>1131.63</td>
    </tr>
    <tr>
      <th>2021-04-02</th>
      <td>1127.30</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>해당 티커를 입력하면, FRED 웹사이트와 동일한 데이터가 다운로드됩니다. 이 외에도 509,000여 개의 방대한 FRED 데이터를 해당 함수를 통해 손쉽게 다운로드할 수 있습니다.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>이 외에도 <code class="docutils literal notranslate"><span class="pre">DataReader()</span></code> 함수를 이용할 경우 다양한 곳의 데이터를 손쉽게 수집할 수 있습니다. 자세한 내용은 아래 사이트를 참조하시기 바랍니다.</p>
<p>https://pandas-datareader.readthedocs.io/en/latest/remote_data.html</p>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="02_information.html" title="previous page">2. 크롤링을 위한 기본 지식</a>
    <a class='right-next' id="next-link" href="04_crawl.html" title="next page">4. 크롤링 이해하기</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By 이현열<br/>
        
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>