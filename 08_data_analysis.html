
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>8.1 종목정보 데이터 분석</title>
    
  <link rel="stylesheet" href="_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  <img src="_static/logo.png" class="logo" alt="logo">
  
  
</a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="index.html">
   파이썬을 이용한 퀀트 투자 포트폴리오 만들기
  </a>
 </li>
</ul>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="01_data_programming.html">
   1. 퀀트 투자의 심장: 데이터와 프로그래밍
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02_information.html">
   2. 크롤링을 위한 기본 지식
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/08_data_analysis.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/hyunyulhenry/quant_python/master?urlpath=tree/08_data_analysis.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   8.2 종목정보 시각화
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="id1">
<h1>8.1 종목정보 데이터 분석<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">KOR_ticker</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/KOR_ticker.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">KOR_ticker</span><span class="p">[</span><span class="s1">&#39;종목코드&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">KOR_ticker</span><span class="p">[</span><span class="s1">&#39;종목코드&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">str</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">KOR_sector</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/KOR_sector.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">KOR_sector</span><span class="p">[</span><span class="s1">&#39;CMP_CD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">KOR_sector</span><span class="p">[</span><span class="s1">&#39;CMP_CD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">str</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>데이터 합치기</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_market</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">KOR_ticker</span><span class="p">,</span> <span class="n">KOR_sector</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;종목코드&#39;</span><span class="p">,</span><span class="s1">&#39;종목명&#39;</span><span class="p">],</span> <span class="n">right_on</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CMP_CD&#39;</span><span class="p">,</span><span class="s1">&#39;CMP_KOR&#39;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_market</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>종목코드</th>
      <th>종목명</th>
      <th>시장구분</th>
      <th>업종명</th>
      <th>종가</th>
      <th>대비</th>
      <th>등락률</th>
      <th>시가총액</th>
      <th>EPS</th>
      <th>PER</th>
      <th>...</th>
      <th>CMP_KOR</th>
      <th>MKT_VAL</th>
      <th>WGT</th>
      <th>S_WGT</th>
      <th>CAL_WGT</th>
      <th>SEC_CD</th>
      <th>SEC_NM_KOR</th>
      <th>SEQ</th>
      <th>TOP60</th>
      <th>APT_SHR_CNT</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>005930</td>
      <td>삼성전자</td>
      <td>KOSPI</td>
      <td>전기전자</td>
      <td>88800</td>
      <td>5900</td>
      <td>7.12</td>
      <td>530116690440000</td>
      <td>3166.0</td>
      <td>28.05</td>
      <td>...</td>
      <td>삼성전자</td>
      <td>378782703.0</td>
      <td>60.33</td>
      <td>60.33</td>
      <td>1.0</td>
      <td>G45</td>
      <td>IT</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>4.477337e+09</td>
    </tr>
    <tr>
      <th>1</th>
      <td>000660</td>
      <td>SK하이닉스</td>
      <td>KOSPI</td>
      <td>전기전자</td>
      <td>138000</td>
      <td>3500</td>
      <td>2.60</td>
      <td>100464326370000</td>
      <td>2943.0</td>
      <td>46.89</td>
      <td>...</td>
      <td>SK하이닉스</td>
      <td>70033828.0</td>
      <td>11.15</td>
      <td>71.48</td>
      <td>1.0</td>
      <td>G45</td>
      <td>IT</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>5.387218e+08</td>
    </tr>
    <tr>
      <th>2</th>
      <td>051910</td>
      <td>LG화학</td>
      <td>KOSPI</td>
      <td>화학</td>
      <td>999000</td>
      <td>37000</td>
      <td>3.85</td>
      <td>70521750657000</td>
      <td>4085.0</td>
      <td>244.55</td>
      <td>...</td>
      <td>LG화학</td>
      <td>45133920.0</td>
      <td>36.70</td>
      <td>36.70</td>
      <td>1.0</td>
      <td>G15</td>
      <td>소재</td>
      <td>1.0</td>
      <td>5.0</td>
      <td>4.517910e+07</td>
    </tr>
    <tr>
      <th>3</th>
      <td>207940</td>
      <td>삼성바이오로직스</td>
      <td>KOSPI</td>
      <td>의약품</td>
      <td>837000</td>
      <td>18000</td>
      <td>2.20</td>
      <td>55380105000000</td>
      <td>3067.0</td>
      <td>272.91</td>
      <td>...</td>
      <td>삼성바이오로직스</td>
      <td>13646531.0</td>
      <td>8.77</td>
      <td>41.20</td>
      <td>1.0</td>
      <td>G35</td>
      <td>건강관리</td>
      <td>3.0</td>
      <td>16.0</td>
      <td>1.654125e+07</td>
    </tr>
    <tr>
      <th>4</th>
      <td>005380</td>
      <td>현대차</td>
      <td>KOSPI</td>
      <td>운수장비</td>
      <td>246000</td>
      <td>40000</td>
      <td>19.42</td>
      <td>52562374002000</td>
      <td>11310.0</td>
      <td>21.75</td>
      <td>...</td>
      <td>현대차</td>
      <td>34620656.0</td>
      <td>19.76</td>
      <td>19.76</td>
      <td>1.0</td>
      <td>G25</td>
      <td>경기관련소비재</td>
      <td>1.0</td>
      <td>6.0</td>
      <td>1.410210e+08</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 28 columns</p>
</div></div></div>
</div>
<ul class="simple">
<li><p>ROE 컬럼 만들기</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_market</span><span class="p">[</span><span class="s1">&#39;ROE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_market</span><span class="p">[</span><span class="s1">&#39;PBR&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">data_market</span><span class="p">[</span><span class="s1">&#39;PER&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_market</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s1">&#39;종목명&#39;</span><span class="p">,</span> <span class="s1">&#39;ROE&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>종목명</th>
      <th>ROE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>삼성전자</td>
      <td>0.084492</td>
    </tr>
    <tr>
      <th>1</th>
      <td>SK하이닉스</td>
      <td>0.044786</td>
    </tr>
    <tr>
      <th>2</th>
      <td>LG화학</td>
      <td>0.018810</td>
    </tr>
    <tr>
      <th>3</th>
      <td>삼성바이오로직스</td>
      <td>0.046609</td>
    </tr>
    <tr>
      <th>4</th>
      <td>현대차</td>
      <td>0.044598</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>간단한 필터</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_market</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">data_market</span><span class="o">.</span><span class="n">PBR</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;종목명&#39;</span><span class="p">,</span> <span class="s1">&#39;PBR&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>종목명</th>
      <th>PBR</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>4</th>
      <td>현대차</td>
      <td>0.97</td>
    </tr>
    <tr>
      <th>11</th>
      <td>기아차</td>
      <td>0.96</td>
    </tr>
    <tr>
      <th>13</th>
      <td>POSCO</td>
      <td>0.58</td>
    </tr>
    <tr>
      <th>18</th>
      <td>SK텔레콤</td>
      <td>0.93</td>
    </tr>
    <tr>
      <th>20</th>
      <td>KB금융</td>
      <td>0.50</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_market</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">data_market</span><span class="o">.</span><span class="n">PBR</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">data_market</span><span class="o">.</span><span class="n">PER</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">data_market</span><span class="o">.</span><span class="n">ROE</span> <span class="o">&gt;</span> <span class="mf">0.1</span><span class="p">),</span> <span class="p">[</span><span class="s1">&#39;종목명&#39;</span><span class="p">,</span> <span class="s1">&#39;PBR&#39;</span><span class="p">,</span> <span class="s1">&#39;PER&#39;</span><span class="p">,</span> <span class="s1">&#39;ROE&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>종목명</th>
      <th>PBR</th>
      <th>PER</th>
      <th>ROE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>94</th>
      <td>GS건설</td>
      <td>0.84</td>
      <td>7.47</td>
      <td>0.112450</td>
    </tr>
    <tr>
      <th>109</th>
      <td>대림산업</td>
      <td>0.54</td>
      <td>4.82</td>
      <td>0.112033</td>
    </tr>
    <tr>
      <th>117</th>
      <td>메리츠증권</td>
      <td>0.66</td>
      <td>4.07</td>
      <td>0.162162</td>
    </tr>
    <tr>
      <th>126</th>
      <td>신세계</td>
      <td>0.62</td>
      <td>4.70</td>
      <td>0.131915</td>
    </tr>
    <tr>
      <th>154</th>
      <td>HDC현대산업개발</td>
      <td>0.60</td>
      <td>3.22</td>
      <td>0.186335</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>요약 통곗값 계산</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_market</span><span class="p">[</span><span class="s1">&#39;PBR&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    2145.000000
mean        3.765753
std        17.823384
min         0.140000
25%         0.800000
50%         1.520000
75%         2.910000
max       577.590000
Name: PBR, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_market</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s1">&#39;종목명&#39;</span><span class="p">,</span> <span class="s1">&#39;PBR&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;PBR&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>종목명</th>
      <th>PBR</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1818</th>
      <td>감마누</td>
      <td>0.14</td>
    </tr>
    <tr>
      <th>1865</th>
      <td>휴스틸</td>
      <td>0.15</td>
    </tr>
    <tr>
      <th>2168</th>
      <td>지스마트글로벌</td>
      <td>0.15</td>
    </tr>
    <tr>
      <th>641</th>
      <td>세아홀딩스</td>
      <td>0.16</td>
    </tr>
    <tr>
      <th>1732</th>
      <td>경동인베스트</td>
      <td>0.18</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_market</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s1">&#39;종목명&#39;</span><span class="p">,</span> <span class="s1">&#39;ROE&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;ROE&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>종목명</th>
      <th>ROE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2080</th>
      <td>이엠앤아이</td>
      <td>4.414634</td>
    </tr>
    <tr>
      <th>377</th>
      <td>한진중공업</td>
      <td>1.755396</td>
    </tr>
    <tr>
      <th>1100</th>
      <td>양지사</td>
      <td>0.738739</td>
    </tr>
    <tr>
      <th>475</th>
      <td>이엔드디</td>
      <td>0.665945</td>
    </tr>
    <tr>
      <th>151</th>
      <td>명신산업</td>
      <td>0.634926</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>순위 계산</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_market</span><span class="p">[</span><span class="s1">&#39;PBR_rank&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_market</span><span class="p">[</span><span class="s1">&#39;PBR&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rank</span><span class="p">()</span>
<span class="n">data_market</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s1">&#39;종목명&#39;</span><span class="p">,</span> <span class="s1">&#39;PBR&#39;</span><span class="p">,</span> <span class="s1">&#39;PBR_rank&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;PBR_rank&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>종목명</th>
      <th>PBR</th>
      <th>PBR_rank</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1818</th>
      <td>감마누</td>
      <td>0.14</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>1865</th>
      <td>휴스틸</td>
      <td>0.15</td>
      <td>2.5</td>
    </tr>
    <tr>
      <th>2168</th>
      <td>지스마트글로벌</td>
      <td>0.15</td>
      <td>2.5</td>
    </tr>
    <tr>
      <th>641</th>
      <td>세아홀딩스</td>
      <td>0.16</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>1732</th>
      <td>경동인베스트</td>
      <td>0.18</td>
      <td>5.5</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_market</span><span class="p">[</span><span class="s1">&#39;PBR_rank&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_market</span><span class="p">[</span><span class="s1">&#39;PBR&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;first&#39;</span><span class="p">)</span>
<span class="n">data_market</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s1">&#39;종목명&#39;</span><span class="p">,</span> <span class="s1">&#39;PBR&#39;</span><span class="p">,</span> <span class="s1">&#39;PBR_rank&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;PBR_rank&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>종목명</th>
      <th>PBR</th>
      <th>PBR_rank</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1818</th>
      <td>감마누</td>
      <td>0.14</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>1865</th>
      <td>휴스틸</td>
      <td>0.15</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>2168</th>
      <td>지스마트글로벌</td>
      <td>0.15</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>641</th>
      <td>세아홀딩스</td>
      <td>0.16</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>1732</th>
      <td>경동인베스트</td>
      <td>0.18</td>
      <td>5.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_market</span><span class="p">[</span><span class="s1">&#39;ROE_rank&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_market</span><span class="p">[</span><span class="s1">&#39;ROE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span class="n">ascending</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">data_market</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s1">&#39;종목명&#39;</span><span class="p">,</span> <span class="s1">&#39;ROE&#39;</span><span class="p">,</span> <span class="s1">&#39;ROE_rank&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;ROE_rank&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>종목명</th>
      <th>ROE</th>
      <th>ROE_rank</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2080</th>
      <td>이엠앤아이</td>
      <td>4.414634</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>377</th>
      <td>한진중공업</td>
      <td>1.755396</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>1100</th>
      <td>양지사</td>
      <td>0.738739</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>475</th>
      <td>이엔드디</td>
      <td>0.665945</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>151</th>
      <td>명신산업</td>
      <td>0.634926</td>
      <td>5.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>분위수 계산</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_market</span><span class="p">[</span><span class="s1">&#39;quantile&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">qcut</span><span class="p">(</span><span class="n">data_market</span><span class="p">[</span><span class="s1">&#39;PBR&#39;</span><span class="p">],</span> <span class="mi">5</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">data_market</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s1">&#39;종목명&#39;</span><span class="p">,</span> <span class="s1">&#39;PBR&#39;</span><span class="p">,</span> <span class="s1">&#39;quantile&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>종목명</th>
      <th>PBR</th>
      <th>quantile</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>삼성전자</td>
      <td>2.37</td>
      <td>4</td>
    </tr>
    <tr>
      <th>1</th>
      <td>SK하이닉스</td>
      <td>2.10</td>
      <td>4</td>
    </tr>
    <tr>
      <th>2</th>
      <td>LG화학</td>
      <td>4.60</td>
      <td>5</td>
    </tr>
    <tr>
      <th>3</th>
      <td>삼성바이오로직스</td>
      <td>12.72</td>
      <td>5</td>
    </tr>
    <tr>
      <th>4</th>
      <td>현대차</td>
      <td>0.97</td>
      <td>2</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2168</th>
      <td>지스마트글로벌</td>
      <td>0.15</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2169</th>
      <td>에스제이케이</td>
      <td>0.50</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2170</th>
      <td>제이웨이</td>
      <td>0.50</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2171</th>
      <td>케이프이에스제4호</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2172</th>
      <td>스타모빌리티</td>
      <td>0.21</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
<p>2173 rows × 3 columns</p>
</div></div></div>
</div>
<ul class="simple">
<li><p>그룹별 계산</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_market</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;SEC_NM_KOR&#39;</span><span class="p">)[</span><span class="s1">&#39;종목명&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SEC_NM_KOR
IT           554
건강관리         267
경기관련소비재      335
금융            77
산업재          347
소재           226
에너지           26
유틸리티          20
커뮤니케이션서비스    113
필수소비재         97
Name: 종목명, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_market</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;SEC_NM_KOR&#39;</span><span class="p">,</span> <span class="n">dropna</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="s1">&#39;종목명&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SEC_NM_KOR
IT           554
건강관리         267
경기관련소비재      335
금융            77
산업재          347
소재           226
에너지           26
유틸리티          20
커뮤니케이션서비스    113
필수소비재         97
NaN          111
Name: 종목명, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_market</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;SEC_NM_KOR&#39;</span><span class="p">)[</span><span class="s1">&#39;PBR&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SEC_NM_KOR
IT           1.960
건강관리         3.810
경기관련소비재      1.060
금융           0.665
산업재          1.080
소재           0.920
에너지          1.290
유틸리티         0.535
커뮤니케이션서비스    1.960
필수소비재        1.000
Name: PBR, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_market</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;시장구분&#39;</span><span class="p">,</span> <span class="s1">&#39;SEC_NM_KOR&#39;</span><span class="p">])[</span><span class="s1">&#39;PBR&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>시장구분    SEC_NM_KOR
KOSDAQ  IT            2.000
        건강관리          4.580
        경기관련소비재       1.465
        금융            1.580
        산업재           1.305
        소재            1.240
        에너지           1.555
        유틸리티          0.980
        커뮤니케이션서비스     2.240
        필수소비재         1.455
KOSPI   IT            1.805
        건강관리          2.720
        경기관련소비재       0.830
        금융            0.530
        산업재           0.915
        소재            0.820
        에너지           0.770
        유틸리티          0.470
        커뮤니케이션서비스     1.690
        필수소비재         0.860
Name: PBR, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="section" id="id2">
<h2>8.2 종목정보 시각화<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_market</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;ROE&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;PBR&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:xlabel=&#39;ROE&#39;, ylabel=&#39;PBR&#39;&gt;
</pre></div>
</div>
<img alt="_images/08_data_analysis_28_1.png" src="_images/08_data_analysis_28_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_market</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;ROE&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;PBR&#39;</span><span class="p">,</span> <span class="n">xlim</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">],</span> <span class="n">ylim</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:xlabel=&#39;ROE&#39;, ylabel=&#39;PBR&#39;&gt;
</pre></div>
</div>
<img alt="_images/08_data_analysis_29_1.png" src="_images/08_data_analysis_29_1.png" />
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By 이현열<br/>
        
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>