
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>9.1 베타 이해하기</title>
    
  <link rel="stylesheet" href="_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  <img src="_static/logo.png" class="logo" alt="logo">
  
  
</a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="index.html">
   파이썬을 이용한 퀀트 투자 포트폴리오 만들기
  </a>
 </li>
</ul>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="01_data_programming.html">
   1. 퀀트 투자의 심장: 데이터와 프로그래밍
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02_information.html">
   2. 크롤링을 위한 기본 지식
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/09_factor_basic.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/hyunyulhenry/quant_python/master?urlpath=tree/09_factor_basic.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   9.1 베타 이해하기
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id2">
     9.1.1 베타 계산하기
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id3">
     9.1.2 베타 시각화
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id4">
     9.2 저변동성 전략
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id5">
     9.2.1 저변동성 포트폴리오 구하기: 일간 기준
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id6">
     9.2.2 저변동성 포트폴리오 구하기: 주간 기준
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id7">
   9.3 모멘텀 전략
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id8">
     9.3.1 모멘텀 포트폴리오 구하기: 12개월 모멘텀
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id9">
     9.3.2 모멘텀 포트폴리오 구하기: 위험조정 수익률
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id10">
   9.4 밸류 전략
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pbr">
     9.4.1 밸류 포트폴리오 구하기: 저PBR
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id11">
     9.4.2 각 지표 결합하기
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id12">
     9.5 퀄리티 전략
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#f-score">
       9.5.1 F-Score
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id13">
     9.5.2 각 지표를 결합하기
    </a>
   </li>
  </ul>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="id1">
<h1>9.1 베타 이해하기<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id2">
<h2>9.1.1 베타 계산하기<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>102110.KS: TIGER 200</p></li>
<li><p>039490.KS: 키움증권</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas_datareader</span> <span class="k">as</span> <span class="nn">web</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">tickers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;102110.KS&#39;</span><span class="p">,</span> <span class="s1">&#39;039490.KS&#39;</span><span class="p">]</span>

<span class="n">all_data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">ticker</span> <span class="ow">in</span> <span class="n">tickers</span><span class="p">:</span>
    <span class="n">all_data</span><span class="p">[</span><span class="n">ticker</span><span class="p">]</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">DataReader</span><span class="p">(</span><span class="n">ticker</span><span class="p">,</span> <span class="s1">&#39;yahoo&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prices</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="n">tic</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Close&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">tic</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">all_data</span><span class="o">.</span><span class="n">items</span><span class="p">()})</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">prices</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="n">ret</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;rm&#39;</span><span class="p">,</span> <span class="s1">&#39;ri&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">statsmodels.formula.api</span> <span class="kn">import</span> <span class="n">ols</span>

<span class="n">fit</span> <span class="o">=</span> <span class="n">ols</span><span class="p">(</span><span class="s1">&#39;ri ~ rm&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">ret</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fit</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="simpletable">
<caption>OLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>           <td>ri</td>        <th>  R-squared:         </th> <td>   0.341</td> 
</tr>
<tr>
  <th>Model:</th>                   <td>OLS</td>       <th>  Adj. R-squared:    </th> <td>   0.341</td> 
</tr>
<tr>
  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   630.2</td> 
</tr>
<tr>
  <th>Date:</th>             <td>Fri, 05 Feb 2021</td> <th>  Prob (F-statistic):</th> <td>2.08e-112</td>
</tr>
<tr>
  <th>Time:</th>                 <td>22:19:45</td>     <th>  Log-Likelihood:    </th> <td>  3000.5</td> 
</tr>
<tr>
  <th>No. Observations:</th>      <td>  1219</td>      <th>  AIC:               </th> <td>  -5997.</td> 
</tr>
<tr>
  <th>Df Residuals:</th>          <td>  1217</td>      <th>  BIC:               </th> <td>  -5987.</td> 
</tr>
<tr>
  <th>Df Model:</th>              <td>     1</td>      <th>                     </th>     <td> </td>    
</tr>
<tr>
  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>    
</tr>
</table>
<table class="simpletable">
<tr>
      <td></td>         <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>  
</tr>
<tr>
  <th>Intercept</th> <td>    0.0004</td> <td>    0.001</td> <td>    0.695</td> <td> 0.487</td> <td>   -0.001</td> <td>    0.002</td>
</tr>
<tr>
  <th>rm</th>        <td>    1.3315</td> <td>    0.053</td> <td>   25.104</td> <td> 0.000</td> <td>    1.227</td> <td>    1.436</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td>151.004</td> <th>  Durbin-Watson:     </th> <td>   2.213</td>
</tr>
<tr>
  <th>Prob(Omnibus):</th> <td> 0.000</td>  <th>  Jarque-Bera (JB):  </th> <td> 322.564</td>
</tr>
<tr>
  <th>Skew:</th>          <td> 0.732</td>  <th>  Prob(JB):          </th> <td>9.04e-71</td>
</tr>
<tr>
  <th>Kurtosis:</th>      <td> 5.051</td>  <th>  Cond. No.          </th> <td>    89.6</td>
</tr>
</table><br/><br/>Notes:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</div></div>
</div>
</div>
<div class="section" id="id3">
<h2>9.1.2 베타 시각화<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">ret</span><span class="p">[</span><span class="s1">&#39;rm&#39;</span><span class="p">],</span><span class="n">ret</span><span class="p">[</span><span class="s1">&#39;ri&#39;</span><span class="p">])</span> <span class="c1"># 원 데이터 산포도</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ret</span><span class="p">[</span><span class="s1">&#39;rm&#39;</span><span class="p">],</span><span class="n">ret</span><span class="p">[</span><span class="s1">&#39;rm&#39;</span><span class="p">],</span> <span class="s1">&#39;-.&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Beta = 1&#39;</span><span class="p">)</span> <span class="c1"># beta = 1</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ret</span><span class="p">[</span><span class="s1">&#39;rm&#39;</span><span class="p">],</span><span class="n">fit</span><span class="o">.</span><span class="n">fittedvalues</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Regression line&#39;</span><span class="p">)</span> <span class="c1"># 회귀직선</span>
 
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;KOSPI 200&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Individual Stock&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span> <span class="o">=</span> <span class="s1">&#39;lower right&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/09_factor_basic_8_0.png" src="_images/09_factor_basic_8_0.png" />
</div>
</div>
</div>
<div class="section" id="id4">
<h2>9.2 저변동성 전략<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">statistics</span> <span class="kn">import</span> <span class="n">stdev</span> 

<span class="n">example</span> <span class="o">=</span> <span class="p">[</span><span class="mi">85</span><span class="p">,</span> <span class="mi">76</span><span class="p">,</span> <span class="mi">73</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">72</span><span class="p">]</span>
<span class="n">stdev</span><span class="p">(</span><span class="n">example</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5.357238094391549
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id5">
<h2>9.2.1 저변동성 포트폴리오 구하기: 일간 기준<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">statistics</span> <span class="kn">import</span> <span class="n">stdev</span> 

<span class="n">KOR_price</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/KOR_price.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">KOR_ticker</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/KOR_ticker.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">KOR_ticker</span><span class="p">[</span><span class="s1">&#39;종목코드&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">KOR_ticker</span><span class="p">[</span><span class="s1">&#39;종목코드&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">str</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ret</span> <span class="o">=</span> <span class="n">KOR_price</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">std_12m_daily</span>  <span class="o">=</span> <span class="n">ret</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">252</span><span class="p">:</span> <span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">stdev</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">252</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">std_12m_daily</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>005930    0.340240
000660    0.427779
051910    0.575808
207940    0.471964
005380    0.543926
            ...   
114570    0.439520
080440    0.462514
058420    0.997542
347140         NaN
158310    0.588562
Length: 2173, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">n</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">patches</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">std_12m_daily</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="n">patches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_fc</span><span class="p">(</span><span class="s1">&#39;red&#39;</span><span class="p">)</span> <span class="c1"># Set color</span>
<span class="n">patches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_alpha</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># Set opacity</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/09_factor_basic_16_0.png" src="_images/09_factor_basic_16_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">std_12m_daily</span><span class="p">[</span><span class="n">std_12m_daily</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">std_12m_daily</span><span class="p">[</span><span class="n">std_12m_daily</span><span class="o">.</span><span class="n">rank</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">30</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>268280    0.200170
001720    0.244699
072710    0.234231
016800    0.151684
000480    0.213002
015360    0.250704
004890    0.220081
176440    0.255595
100250    0.218530
134380    0.184164
117580    0.202525
024090    0.240118
003460    0.238900
007330    0.250486
003650    0.254054
034590    0.184442
040420    0.237527
007590    0.250728
005190    0.252569
273060    0.197063
109860    0.235346
000850    0.262831
084670    0.251166
339950    0.188008
037440    0.258264
221980    0.250655
168330    0.123779
043100    0.082590
069330    0.060311
033600    0.154418
dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span> 
        <span class="n">height</span> <span class="o">=</span> <span class="n">std_12m_daily</span><span class="p">[</span><span class="n">std_12m_daily</span><span class="o">.</span><span class="n">rank</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">30</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;BarContainer object of 30 artists&gt;
</pre></div>
</div>
<img alt="_images/09_factor_basic_19_1.png" src="_images/09_factor_basic_19_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">invest_lowvol</span> <span class="o">=</span> <span class="p">(</span><span class="n">std_12m_daily</span><span class="o">.</span><span class="n">rank</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">30</span><span class="p">)</span>

<span class="n">invest_lowvol_res</span> <span class="o">=</span> <span class="n">KOR_ticker</span><span class="p">[</span><span class="n">invest_lowvol</span><span class="o">.</span><span class="n">values</span><span class="p">][[</span><span class="s1">&#39;종목코드&#39;</span><span class="p">,</span> <span class="s1">&#39;종목명&#39;</span><span class="p">]]</span>
<span class="n">invest_lowvol_res</span><span class="p">[</span><span class="s1">&#39;변동성&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">std_12m_daily</span><span class="p">[</span><span class="n">invest_lowvol</span><span class="p">]</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>

<span class="n">invest_lowvol_res</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>종목코드</th>
      <th>종목명</th>
      <th>변동성</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>392</th>
      <td>268280</td>
      <td>미원에스씨</td>
      <td>0.2002</td>
    </tr>
    <tr>
      <th>422</th>
      <td>001720</td>
      <td>신영증권</td>
      <td>0.2447</td>
    </tr>
    <tr>
      <th>570</th>
      <td>072710</td>
      <td>농심홀딩스</td>
      <td>0.2342</td>
    </tr>
    <tr>
      <th>604</th>
      <td>016800</td>
      <td>퍼시스</td>
      <td>0.1517</td>
    </tr>
    <tr>
      <th>606</th>
      <td>000480</td>
      <td>조선내화</td>
      <td>0.2130</td>
    </tr>
    <tr>
      <th>869</th>
      <td>015360</td>
      <td>예스코홀딩스</td>
      <td>0.2507</td>
    </tr>
    <tr>
      <th>964</th>
      <td>004890</td>
      <td>동일산업</td>
      <td>0.2201</td>
    </tr>
    <tr>
      <th>1049</th>
      <td>176440</td>
      <td>에이치엔티</td>
      <td>0.2556</td>
    </tr>
    <tr>
      <th>1099</th>
      <td>100250</td>
      <td>진양홀딩스</td>
      <td>0.2185</td>
    </tr>
    <tr>
      <th>1137</th>
      <td>134380</td>
      <td>미원화학</td>
      <td>0.1842</td>
    </tr>
    <tr>
      <th>1147</th>
      <td>117580</td>
      <td>대성에너지</td>
      <td>0.2025</td>
    </tr>
    <tr>
      <th>1166</th>
      <td>024090</td>
      <td>디씨엠</td>
      <td>0.2401</td>
    </tr>
    <tr>
      <th>1222</th>
      <td>003460</td>
      <td>유화증권</td>
      <td>0.2389</td>
    </tr>
    <tr>
      <th>1284</th>
      <td>007330</td>
      <td>푸른저축은행</td>
      <td>0.2505</td>
    </tr>
    <tr>
      <th>1353</th>
      <td>003650</td>
      <td>미창석유</td>
      <td>0.2541</td>
    </tr>
    <tr>
      <th>1393</th>
      <td>034590</td>
      <td>인천도시가스</td>
      <td>0.1844</td>
    </tr>
    <tr>
      <th>1490</th>
      <td>040420</td>
      <td>정상제이엘에스</td>
      <td>0.2375</td>
    </tr>
    <tr>
      <th>1580</th>
      <td>007590</td>
      <td>동방아그로</td>
      <td>0.2507</td>
    </tr>
    <tr>
      <th>1583</th>
      <td>005190</td>
      <td>동성화학</td>
      <td>0.2526</td>
    </tr>
    <tr>
      <th>1600</th>
      <td>273060</td>
      <td>와이즈버즈</td>
      <td>0.1971</td>
    </tr>
    <tr>
      <th>1652</th>
      <td>109860</td>
      <td>동일금속</td>
      <td>0.2353</td>
    </tr>
    <tr>
      <th>1731</th>
      <td>000850</td>
      <td>화천기공</td>
      <td>0.2628</td>
    </tr>
    <tr>
      <th>1748</th>
      <td>084670</td>
      <td>동양고속</td>
      <td>0.2512</td>
    </tr>
    <tr>
      <th>1752</th>
      <td>339950</td>
      <td>아이비김영</td>
      <td>0.1880</td>
    </tr>
    <tr>
      <th>1907</th>
      <td>037440</td>
      <td>희림</td>
      <td>0.2583</td>
    </tr>
    <tr>
      <th>1924</th>
      <td>221980</td>
      <td>케이디켐</td>
      <td>0.2507</td>
    </tr>
    <tr>
      <th>1934</th>
      <td>168330</td>
      <td>내츄럴엔도텍</td>
      <td>0.1238</td>
    </tr>
    <tr>
      <th>2137</th>
      <td>043100</td>
      <td>솔고바이오</td>
      <td>0.0826</td>
    </tr>
    <tr>
      <th>2161</th>
      <td>069330</td>
      <td>유아이디</td>
      <td>0.0603</td>
    </tr>
    <tr>
      <th>2164</th>
      <td>033600</td>
      <td>럭슬</td>
      <td>0.1544</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="id6">
<h2>9.2.2 저변동성 포트폴리오 구하기: 주간 기준<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">KOR_price</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">KOR_price</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ret_w</span> <span class="o">=</span> <span class="n">KOR_price</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;W&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">ffill</span><span class="p">()</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span>
<span class="n">std_12m_weekly</span> <span class="o">=</span> <span class="n">ret_w</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">52</span><span class="p">:</span> <span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">stdev</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">52</span><span class="p">)</span>
<span class="n">std_12m_weekly</span><span class="p">[</span><span class="n">std_12m_weekly</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">std_12m_weekly</span><span class="p">[</span><span class="n">std_12m_weekly</span><span class="o">.</span><span class="n">rank</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">30</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>012750    0.254740
007310    0.244703
268280    0.190580
001720    0.253292
072710    0.238578
016800    0.122253
000480    0.222443
002960    0.252955
015360    0.241679
004890    0.254750
100250    0.245149
134380    0.236144
117580    0.209608
024090    0.247769
282690    0.251754
003460    0.180590
007330    0.246069
034590    0.163308
040420    0.188693
005190    0.237917
273060    0.173678
004450    0.243780
109860    0.172111
339950    0.244156
115310    0.192353
037440    0.212868
168330    0.144068
043100    0.059952
069330    0.032110
033600    0.178899
dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">invest_lowvol_weekly</span> <span class="o">=</span> <span class="p">(</span><span class="n">std_12m_weekly</span><span class="o">.</span><span class="n">rank</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">30</span><span class="p">)</span>

<span class="n">invest_lowvol_weekly_res</span> <span class="o">=</span> <span class="n">KOR_ticker</span><span class="p">[</span><span class="n">invest_lowvol_weekly</span><span class="o">.</span><span class="n">values</span><span class="p">][[</span><span class="s1">&#39;종목코드&#39;</span><span class="p">,</span> <span class="s1">&#39;종목명&#39;</span><span class="p">]]</span>
<span class="n">invest_lowvol_weekly_res</span><span class="p">[</span><span class="s1">&#39;변동성&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">std_12m_weekly</span><span class="p">[</span><span class="n">invest_lowvol_weekly</span><span class="p">]</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>

<span class="n">invest_lowvol_weekly_res</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>종목코드</th>
      <th>종목명</th>
      <th>변동성</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>92</th>
      <td>012750</td>
      <td>에스원</td>
      <td>0.2547</td>
    </tr>
    <tr>
      <th>138</th>
      <td>007310</td>
      <td>오뚜기</td>
      <td>0.2447</td>
    </tr>
    <tr>
      <th>392</th>
      <td>268280</td>
      <td>미원에스씨</td>
      <td>0.1906</td>
    </tr>
    <tr>
      <th>422</th>
      <td>001720</td>
      <td>신영증권</td>
      <td>0.2533</td>
    </tr>
    <tr>
      <th>570</th>
      <td>072710</td>
      <td>농심홀딩스</td>
      <td>0.2386</td>
    </tr>
    <tr>
      <th>604</th>
      <td>016800</td>
      <td>퍼시스</td>
      <td>0.1223</td>
    </tr>
    <tr>
      <th>606</th>
      <td>000480</td>
      <td>조선내화</td>
      <td>0.2224</td>
    </tr>
    <tr>
      <th>609</th>
      <td>002960</td>
      <td>한국쉘석유</td>
      <td>0.2530</td>
    </tr>
    <tr>
      <th>869</th>
      <td>015360</td>
      <td>예스코홀딩스</td>
      <td>0.2417</td>
    </tr>
    <tr>
      <th>964</th>
      <td>004890</td>
      <td>동일산업</td>
      <td>0.2548</td>
    </tr>
    <tr>
      <th>1099</th>
      <td>100250</td>
      <td>진양홀딩스</td>
      <td>0.2451</td>
    </tr>
    <tr>
      <th>1137</th>
      <td>134380</td>
      <td>미원화학</td>
      <td>0.2361</td>
    </tr>
    <tr>
      <th>1147</th>
      <td>117580</td>
      <td>대성에너지</td>
      <td>0.2096</td>
    </tr>
    <tr>
      <th>1166</th>
      <td>024090</td>
      <td>디씨엠</td>
      <td>0.2478</td>
    </tr>
    <tr>
      <th>1180</th>
      <td>282690</td>
      <td>동아타이어</td>
      <td>0.2518</td>
    </tr>
    <tr>
      <th>1222</th>
      <td>003460</td>
      <td>유화증권</td>
      <td>0.1806</td>
    </tr>
    <tr>
      <th>1284</th>
      <td>007330</td>
      <td>푸른저축은행</td>
      <td>0.2461</td>
    </tr>
    <tr>
      <th>1393</th>
      <td>034590</td>
      <td>인천도시가스</td>
      <td>0.1633</td>
    </tr>
    <tr>
      <th>1490</th>
      <td>040420</td>
      <td>정상제이엘에스</td>
      <td>0.1887</td>
    </tr>
    <tr>
      <th>1583</th>
      <td>005190</td>
      <td>동성화학</td>
      <td>0.2379</td>
    </tr>
    <tr>
      <th>1600</th>
      <td>273060</td>
      <td>와이즈버즈</td>
      <td>0.1737</td>
    </tr>
    <tr>
      <th>1623</th>
      <td>004450</td>
      <td>삼화왕관</td>
      <td>0.2438</td>
    </tr>
    <tr>
      <th>1652</th>
      <td>109860</td>
      <td>동일금속</td>
      <td>0.1721</td>
    </tr>
    <tr>
      <th>1752</th>
      <td>339950</td>
      <td>아이비김영</td>
      <td>0.2442</td>
    </tr>
    <tr>
      <th>1822</th>
      <td>115310</td>
      <td>인포바인</td>
      <td>0.1924</td>
    </tr>
    <tr>
      <th>1907</th>
      <td>037440</td>
      <td>희림</td>
      <td>0.2129</td>
    </tr>
    <tr>
      <th>1934</th>
      <td>168330</td>
      <td>내츄럴엔도텍</td>
      <td>0.1441</td>
    </tr>
    <tr>
      <th>2137</th>
      <td>043100</td>
      <td>솔고바이오</td>
      <td>0.0600</td>
    </tr>
    <tr>
      <th>2161</th>
      <td>069330</td>
      <td>유아이디</td>
      <td>0.0321</td>
    </tr>
    <tr>
      <th>2164</th>
      <td>033600</td>
      <td>럭슬</td>
      <td>0.1789</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">invest_lowvol_res</span><span class="p">[</span><span class="s1">&#39;종목명&#39;</span><span class="p">],</span> <span class="n">invest_lowvol_weekly_res</span><span class="p">[</span><span class="s1">&#39;종목명&#39;</span><span class="p">],</span> <span class="n">how</span> <span class="o">=</span> <span class="s1">&#39;inner&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>종목명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>미원에스씨</td>
    </tr>
    <tr>
      <th>1</th>
      <td>신영증권</td>
    </tr>
    <tr>
      <th>2</th>
      <td>농심홀딩스</td>
    </tr>
    <tr>
      <th>3</th>
      <td>퍼시스</td>
    </tr>
    <tr>
      <th>4</th>
      <td>조선내화</td>
    </tr>
    <tr>
      <th>5</th>
      <td>예스코홀딩스</td>
    </tr>
    <tr>
      <th>6</th>
      <td>동일산업</td>
    </tr>
    <tr>
      <th>7</th>
      <td>진양홀딩스</td>
    </tr>
    <tr>
      <th>8</th>
      <td>미원화학</td>
    </tr>
    <tr>
      <th>9</th>
      <td>대성에너지</td>
    </tr>
    <tr>
      <th>10</th>
      <td>디씨엠</td>
    </tr>
    <tr>
      <th>11</th>
      <td>유화증권</td>
    </tr>
    <tr>
      <th>12</th>
      <td>푸른저축은행</td>
    </tr>
    <tr>
      <th>13</th>
      <td>인천도시가스</td>
    </tr>
    <tr>
      <th>14</th>
      <td>정상제이엘에스</td>
    </tr>
    <tr>
      <th>15</th>
      <td>동성화학</td>
    </tr>
    <tr>
      <th>16</th>
      <td>와이즈버즈</td>
    </tr>
    <tr>
      <th>17</th>
      <td>동일금속</td>
    </tr>
    <tr>
      <th>18</th>
      <td>아이비김영</td>
    </tr>
    <tr>
      <th>19</th>
      <td>희림</td>
    </tr>
    <tr>
      <th>20</th>
      <td>내츄럴엔도텍</td>
    </tr>
    <tr>
      <th>21</th>
      <td>솔고바이오</td>
    </tr>
    <tr>
      <th>22</th>
      <td>유아이디</td>
    </tr>
    <tr>
      <th>23</th>
      <td>럭슬</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
</div>
<div class="section" id="id7">
<h1>9.3 모멘텀 전략<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id8">
<h2>9.3.1 모멘텀 포트폴리오 구하기: 12개월 모멘텀<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">statistics</span> <span class="kn">import</span> <span class="n">stdev</span> 

<span class="n">KOR_price</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/KOR_price.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">KOR_ticker</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/KOR_ticker.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">KOR_ticker</span><span class="p">[</span><span class="s1">&#39;종목코드&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">KOR_ticker</span><span class="p">[</span><span class="s1">&#39;종목코드&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">str</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ret</span> <span class="o">=</span> <span class="n">KOR_price</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ret_12m</span> <span class="o">=</span> <span class="n">ret</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">252</span><span class="p">:</span> <span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">prod</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ret_12m</span><span class="p">[</span><span class="n">ret_12m</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span class="n">ascending</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">30</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>068760     3.528990
019170    11.689335
096530     4.976744
285130     6.491379
336260     7.137334
112610     3.799152
235980     4.505654
323990    10.906103
268600     3.692257
011000     5.284253
156100     7.048359
100090     3.921875
018000     3.452954
001470     5.350000
222080     4.200000
101360     4.118750
109820     5.531915
353810     5.568338
025950     5.075534
023800     3.984326
037270     3.719424
241840     4.032432
217330     5.243386
205470     4.600000
058110     7.415842
082850     3.896861
050960     6.040000
080580    13.185111
011500     4.136742
045340     5.268908
dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">invest_mom</span> <span class="o">=</span> <span class="p">(</span><span class="n">ret_12m</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span class="n">ascending</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">30</span><span class="p">)</span>

<span class="n">invest_mom_res</span> <span class="o">=</span> <span class="n">KOR_ticker</span><span class="p">[</span><span class="n">invest_mom</span><span class="o">.</span><span class="n">values</span><span class="p">][[</span><span class="s1">&#39;종목코드&#39;</span><span class="p">,</span> <span class="s1">&#39;종목명&#39;</span><span class="p">]]</span>
<span class="n">invest_mom_res</span><span class="p">[</span><span class="s1">&#39;수익률&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ret_12m</span><span class="p">[</span><span class="n">invest_mom</span><span class="p">]</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>

<span class="n">invest_mom_res</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>종목코드</th>
      <th>종목명</th>
      <th>수익률</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>40</th>
      <td>068760</td>
      <td>셀트리온제약</td>
      <td>3.5290</td>
    </tr>
    <tr>
      <th>44</th>
      <td>019170</td>
      <td>신풍제약</td>
      <td>11.6893</td>
    </tr>
    <tr>
      <th>63</th>
      <td>096530</td>
      <td>씨젠</td>
      <td>4.9767</td>
    </tr>
    <tr>
      <th>74</th>
      <td>285130</td>
      <td>SK케미칼</td>
      <td>6.4914</td>
    </tr>
    <tr>
      <th>83</th>
      <td>336260</td>
      <td>두산퓨얼셀</td>
      <td>7.1373</td>
    </tr>
    <tr>
      <th>103</th>
      <td>112610</td>
      <td>씨에스윈드</td>
      <td>3.7992</td>
    </tr>
    <tr>
      <th>141</th>
      <td>235980</td>
      <td>메드팩토</td>
      <td>4.5057</td>
    </tr>
    <tr>
      <th>162</th>
      <td>323990</td>
      <td>박셀바이오</td>
      <td>10.9061</td>
    </tr>
    <tr>
      <th>171</th>
      <td>268600</td>
      <td>셀리버리</td>
      <td>3.6923</td>
    </tr>
    <tr>
      <th>246</th>
      <td>011000</td>
      <td>진원생명과학</td>
      <td>5.2843</td>
    </tr>
    <tr>
      <th>284</th>
      <td>156100</td>
      <td>엘앤케이바이오</td>
      <td>7.0484</td>
    </tr>
    <tr>
      <th>290</th>
      <td>100090</td>
      <td>삼강엠앤티</td>
      <td>3.9219</td>
    </tr>
    <tr>
      <th>358</th>
      <td>018000</td>
      <td>유니슨</td>
      <td>3.4530</td>
    </tr>
    <tr>
      <th>371</th>
      <td>001470</td>
      <td>삼부토건</td>
      <td>5.3500</td>
    </tr>
    <tr>
      <th>379</th>
      <td>222080</td>
      <td>씨아이에스</td>
      <td>4.2000</td>
    </tr>
    <tr>
      <th>475</th>
      <td>101360</td>
      <td>이엔드디</td>
      <td>4.1188</td>
    </tr>
    <tr>
      <th>514</th>
      <td>109820</td>
      <td>진매트릭스</td>
      <td>5.5319</td>
    </tr>
    <tr>
      <th>579</th>
      <td>353810</td>
      <td>이지바이오</td>
      <td>5.5683</td>
    </tr>
    <tr>
      <th>581</th>
      <td>025950</td>
      <td>동신건설</td>
      <td>5.0755</td>
    </tr>
    <tr>
      <th>629</th>
      <td>023800</td>
      <td>인지컨트롤스</td>
      <td>3.9843</td>
    </tr>
    <tr>
      <th>642</th>
      <td>037270</td>
      <td>YG PLUS</td>
      <td>3.7194</td>
    </tr>
    <tr>
      <th>644</th>
      <td>241840</td>
      <td>에이스토리</td>
      <td>4.0324</td>
    </tr>
    <tr>
      <th>645</th>
      <td>217330</td>
      <td>싸이토젠</td>
      <td>5.2434</td>
    </tr>
    <tr>
      <th>665</th>
      <td>205470</td>
      <td>휴마시스</td>
      <td>4.6000</td>
    </tr>
    <tr>
      <th>748</th>
      <td>058110</td>
      <td>멕아이씨에스</td>
      <td>7.4158</td>
    </tr>
    <tr>
      <th>785</th>
      <td>082850</td>
      <td>우리바이오</td>
      <td>3.8969</td>
    </tr>
    <tr>
      <th>901</th>
      <td>050960</td>
      <td>수산아이앤티</td>
      <td>6.0400</td>
    </tr>
    <tr>
      <th>967</th>
      <td>080580</td>
      <td>오킨스전자</td>
      <td>13.1851</td>
    </tr>
    <tr>
      <th>1073</th>
      <td>011500</td>
      <td>한농화성</td>
      <td>4.1367</td>
    </tr>
    <tr>
      <th>1236</th>
      <td>045340</td>
      <td>토탈소프트</td>
      <td>5.2689</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="id9">
<h2>9.3.2 모멘텀 포트폴리오 구하기: 위험조정 수익률<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ret_12m</span> <span class="o">=</span> <span class="n">ret</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">252</span><span class="p">:</span> <span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">prod</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">std_12m</span> <span class="o">=</span> <span class="n">ret</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">252</span><span class="p">:</span> <span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">stdev</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">252</span><span class="p">)</span>

<span class="n">sharpe_12m</span> <span class="o">=</span> <span class="n">ret_12m</span> <span class="o">/</span> <span class="n">std_12m</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">invest_mom_sharpe</span> <span class="o">=</span> <span class="p">(</span><span class="n">sharpe_12m</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span class="n">ascending</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">30</span><span class="p">)</span>

<span class="n">invest_mom_sharpe_res</span> <span class="o">=</span> <span class="n">KOR_ticker</span><span class="p">[</span><span class="n">invest_mom_sharpe</span><span class="o">.</span><span class="n">values</span><span class="p">][[</span><span class="s1">&#39;종목코드&#39;</span><span class="p">,</span> <span class="s1">&#39;종목명&#39;</span><span class="p">]]</span>
<span class="n">invest_mom_sharpe_res</span><span class="p">[</span><span class="s1">&#39;수익률&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ret_12m</span><span class="p">[</span><span class="n">invest_mom_sharpe</span><span class="p">]</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
<span class="n">invest_mom_sharpe_res</span><span class="p">[</span><span class="s1">&#39;변동성&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">std_12m</span><span class="p">[</span><span class="n">invest_mom_sharpe</span><span class="p">]</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
<span class="n">invest_mom_sharpe_res</span><span class="p">[</span><span class="s1">&#39;위험조정 수익률&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sharpe_12m</span><span class="p">[</span><span class="n">invest_mom_sharpe</span><span class="p">]</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>

<span class="n">invest_mom_sharpe_res</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>종목코드</th>
      <th>종목명</th>
      <th>수익률</th>
      <th>변동성</th>
      <th>위험조정 수익률</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>8</th>
      <td>035720</td>
      <td>카카오</td>
      <td>1.8245</td>
      <td>0.4205</td>
      <td>4.3393</td>
    </tr>
    <tr>
      <th>40</th>
      <td>068760</td>
      <td>셀트리온제약</td>
      <td>3.5290</td>
      <td>0.8610</td>
      <td>4.0989</td>
    </tr>
    <tr>
      <th>44</th>
      <td>019170</td>
      <td>신풍제약</td>
      <td>11.6893</td>
      <td>1.4408</td>
      <td>8.1131</td>
    </tr>
    <tr>
      <th>56</th>
      <td>011200</td>
      <td>HMM</td>
      <td>3.0882</td>
      <td>0.6346</td>
      <td>4.8664</td>
    </tr>
    <tr>
      <th>59</th>
      <td>011780</td>
      <td>금호석유</td>
      <td>3.3445</td>
      <td>0.7182</td>
      <td>4.6567</td>
    </tr>
    <tr>
      <th>63</th>
      <td>096530</td>
      <td>씨젠</td>
      <td>4.9767</td>
      <td>1.0648</td>
      <td>4.6740</td>
    </tr>
    <tr>
      <th>74</th>
      <td>285130</td>
      <td>SK케미칼</td>
      <td>6.4914</td>
      <td>0.8352</td>
      <td>7.7723</td>
    </tr>
    <tr>
      <th>83</th>
      <td>336260</td>
      <td>두산퓨얼셀</td>
      <td>7.1373</td>
      <td>1.0008</td>
      <td>7.1318</td>
    </tr>
    <tr>
      <th>103</th>
      <td>112610</td>
      <td>씨에스윈드</td>
      <td>3.7992</td>
      <td>0.7064</td>
      <td>5.3780</td>
    </tr>
    <tr>
      <th>141</th>
      <td>235980</td>
      <td>메드팩토</td>
      <td>4.5057</td>
      <td>0.8659</td>
      <td>5.2037</td>
    </tr>
    <tr>
      <th>284</th>
      <td>156100</td>
      <td>엘앤케이바이오</td>
      <td>7.0484</td>
      <td>0.9550</td>
      <td>7.3806</td>
    </tr>
    <tr>
      <th>290</th>
      <td>100090</td>
      <td>삼강엠앤티</td>
      <td>3.9219</td>
      <td>0.8356</td>
      <td>4.6932</td>
    </tr>
    <tr>
      <th>339</th>
      <td>002840</td>
      <td>미원상사</td>
      <td>1.2432</td>
      <td>0.2741</td>
      <td>4.5355</td>
    </tr>
    <tr>
      <th>371</th>
      <td>001470</td>
      <td>삼부토건</td>
      <td>5.3500</td>
      <td>0.7873</td>
      <td>6.7958</td>
    </tr>
    <tr>
      <th>379</th>
      <td>222080</td>
      <td>씨아이에스</td>
      <td>4.2000</td>
      <td>0.8521</td>
      <td>4.9292</td>
    </tr>
    <tr>
      <th>475</th>
      <td>101360</td>
      <td>이엔드디</td>
      <td>4.1188</td>
      <td>0.8728</td>
      <td>4.7191</td>
    </tr>
    <tr>
      <th>484</th>
      <td>016710</td>
      <td>대성홀딩스</td>
      <td>2.3744</td>
      <td>0.2936</td>
      <td>8.0858</td>
    </tr>
    <tr>
      <th>514</th>
      <td>109820</td>
      <td>진매트릭스</td>
      <td>5.5319</td>
      <td>1.2660</td>
      <td>4.3695</td>
    </tr>
    <tr>
      <th>573</th>
      <td>083420</td>
      <td>그린케미칼</td>
      <td>3.1988</td>
      <td>0.7295</td>
      <td>4.3847</td>
    </tr>
    <tr>
      <th>581</th>
      <td>025950</td>
      <td>동신건설</td>
      <td>5.0755</td>
      <td>1.1540</td>
      <td>4.3982</td>
    </tr>
    <tr>
      <th>629</th>
      <td>023800</td>
      <td>인지컨트롤스</td>
      <td>3.9843</td>
      <td>0.8410</td>
      <td>4.7377</td>
    </tr>
    <tr>
      <th>644</th>
      <td>241840</td>
      <td>에이스토리</td>
      <td>4.0324</td>
      <td>0.8995</td>
      <td>4.4830</td>
    </tr>
    <tr>
      <th>645</th>
      <td>217330</td>
      <td>싸이토젠</td>
      <td>5.2434</td>
      <td>0.8455</td>
      <td>6.2016</td>
    </tr>
    <tr>
      <th>748</th>
      <td>058110</td>
      <td>멕아이씨에스</td>
      <td>7.4158</td>
      <td>1.2404</td>
      <td>5.9787</td>
    </tr>
    <tr>
      <th>827</th>
      <td>054920</td>
      <td>한컴위드</td>
      <td>2.5657</td>
      <td>0.6114</td>
      <td>4.1966</td>
    </tr>
    <tr>
      <th>901</th>
      <td>050960</td>
      <td>수산아이앤티</td>
      <td>6.0400</td>
      <td>0.9459</td>
      <td>6.3852</td>
    </tr>
    <tr>
      <th>967</th>
      <td>080580</td>
      <td>오킨스전자</td>
      <td>13.1851</td>
      <td>0.9084</td>
      <td>14.5153</td>
    </tr>
    <tr>
      <th>1073</th>
      <td>011500</td>
      <td>한농화성</td>
      <td>4.1367</td>
      <td>0.8320</td>
      <td>4.9723</td>
    </tr>
    <tr>
      <th>1236</th>
      <td>045340</td>
      <td>토탈소프트</td>
      <td>5.2689</td>
      <td>0.9171</td>
      <td>5.7450</td>
    </tr>
    <tr>
      <th>1666</th>
      <td>013720</td>
      <td>청보산업</td>
      <td>3.2430</td>
      <td>0.6966</td>
      <td>4.6552</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">invest_mom_res</span><span class="p">[</span><span class="s1">&#39;종목명&#39;</span><span class="p">],</span> <span class="n">invest_mom_sharpe_res</span><span class="p">[</span><span class="s1">&#39;종목명&#39;</span><span class="p">],</span> <span class="n">how</span> <span class="o">=</span> <span class="s1">&#39;inner&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>종목명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>셀트리온제약</td>
    </tr>
    <tr>
      <th>1</th>
      <td>신풍제약</td>
    </tr>
    <tr>
      <th>2</th>
      <td>씨젠</td>
    </tr>
    <tr>
      <th>3</th>
      <td>SK케미칼</td>
    </tr>
    <tr>
      <th>4</th>
      <td>두산퓨얼셀</td>
    </tr>
    <tr>
      <th>5</th>
      <td>씨에스윈드</td>
    </tr>
    <tr>
      <th>6</th>
      <td>메드팩토</td>
    </tr>
    <tr>
      <th>7</th>
      <td>엘앤케이바이오</td>
    </tr>
    <tr>
      <th>8</th>
      <td>삼강엠앤티</td>
    </tr>
    <tr>
      <th>9</th>
      <td>삼부토건</td>
    </tr>
    <tr>
      <th>10</th>
      <td>씨아이에스</td>
    </tr>
    <tr>
      <th>11</th>
      <td>이엔드디</td>
    </tr>
    <tr>
      <th>12</th>
      <td>진매트릭스</td>
    </tr>
    <tr>
      <th>13</th>
      <td>동신건설</td>
    </tr>
    <tr>
      <th>14</th>
      <td>인지컨트롤스</td>
    </tr>
    <tr>
      <th>15</th>
      <td>에이스토리</td>
    </tr>
    <tr>
      <th>16</th>
      <td>싸이토젠</td>
    </tr>
    <tr>
      <th>17</th>
      <td>멕아이씨에스</td>
    </tr>
    <tr>
      <th>18</th>
      <td>수산아이앤티</td>
    </tr>
    <tr>
      <th>19</th>
      <td>오킨스전자</td>
    </tr>
    <tr>
      <th>20</th>
      <td>한농화성</td>
    </tr>
    <tr>
      <th>21</th>
      <td>토탈소프트</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">select_sharpe</span> <span class="o">=</span> <span class="n">KOR_price</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">252</span><span class="p">:,</span> <span class="n">invest_mom_sharpe</span><span class="o">.</span><span class="n">values</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">12</span><span class="p">))</span>

<span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">axs</span><span class="o">.</span><span class="n">flatten</span><span class="p">()):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">select_sharpe</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">select_sharpe</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">n</span><span class="p">])</span>                   
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">select_sharpe</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">n</span><span class="p">],</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Top 30 by Risk Adjusted Momentum&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mf">0.95</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/09_factor_basic_39_0.png" src="_images/09_factor_basic_39_0.png" />
</div>
</div>
</div>
</div>
<div class="section" id="id10">
<h1>9.4 밸류 전략<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h1>
<div class="section" id="pbr">
<h2>9.4.1 밸류 포트폴리오 구하기: 저PBR<a class="headerlink" href="#pbr" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">statistics</span> <span class="kn">import</span> <span class="n">stdev</span> 

<span class="n">KOR_value</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/KOR_value.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">KOR_value</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">KOR_value</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">str</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>

<span class="n">KOR_ticker</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/KOR_ticker.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">KOR_ticker</span><span class="p">[</span><span class="s1">&#39;종목코드&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">KOR_ticker</span><span class="p">[</span><span class="s1">&#39;종목코드&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">str</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">invest_pbr</span>  <span class="o">=</span> <span class="p">(</span><span class="n">KOR_value</span><span class="p">[</span><span class="s1">&#39;PBR&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rank</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">30</span><span class="p">)</span>

<span class="n">invest_pbr_res</span> <span class="o">=</span> <span class="n">KOR_ticker</span><span class="p">[</span><span class="n">invest_pbr</span><span class="o">.</span><span class="n">values</span><span class="p">][[</span><span class="s1">&#39;종목코드&#39;</span><span class="p">,</span> <span class="s1">&#39;종목명&#39;</span><span class="p">]]</span>
<span class="n">invest_pbr_res</span><span class="p">[</span><span class="s1">&#39;PBR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">KOR_value</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">invest_pbr</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;PBR&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>

<span class="n">invest_pbr_res</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>종목코드</th>
      <th>종목명</th>
      <th>PBR</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>23</th>
      <td>015760</td>
      <td>한국전력</td>
      <td>0.2195</td>
    </tr>
    <tr>
      <th>105</th>
      <td>001040</td>
      <td>CJ</td>
      <td>0.1992</td>
    </tr>
    <tr>
      <th>109</th>
      <td>000210</td>
      <td>대림산업</td>
      <td>0.2056</td>
    </tr>
    <tr>
      <th>130</th>
      <td>000880</td>
      <td>한화</td>
      <td>0.1400</td>
    </tr>
    <tr>
      <th>261</th>
      <td>000150</td>
      <td>두산</td>
      <td>0.1275</td>
    </tr>
    <tr>
      <th>278</th>
      <td>003380</td>
      <td>하림지주</td>
      <td>0.2214</td>
    </tr>
    <tr>
      <th>414</th>
      <td>032190</td>
      <td>다우데이타</td>
      <td>0.1834</td>
    </tr>
    <tr>
      <th>429</th>
      <td>009970</td>
      <td>영원무역홀딩스</td>
      <td>0.2099</td>
    </tr>
    <tr>
      <th>641</th>
      <td>058650</td>
      <td>세아홀딩스</td>
      <td>0.0973</td>
    </tr>
    <tr>
      <th>643</th>
      <td>003300</td>
      <td>한일홀딩스</td>
      <td>0.1811</td>
    </tr>
    <tr>
      <th>669</th>
      <td>002240</td>
      <td>고려제강</td>
      <td>0.2219</td>
    </tr>
    <tr>
      <th>745</th>
      <td>001940</td>
      <td>KISCO홀딩스</td>
      <td>0.2032</td>
    </tr>
    <tr>
      <th>770</th>
      <td>092230</td>
      <td>KPX홀딩스</td>
      <td>0.2164</td>
    </tr>
    <tr>
      <th>774</th>
      <td>005720</td>
      <td>넥센</td>
      <td>0.1253</td>
    </tr>
    <tr>
      <th>788</th>
      <td>036530</td>
      <td>S&amp;T홀딩스</td>
      <td>0.1609</td>
    </tr>
    <tr>
      <th>882</th>
      <td>002030</td>
      <td>아세아</td>
      <td>0.1414</td>
    </tr>
    <tr>
      <th>923</th>
      <td>003030</td>
      <td>세아제강지주</td>
      <td>0.1413</td>
    </tr>
    <tr>
      <th>1226</th>
      <td>054800</td>
      <td>아이디스홀딩스</td>
      <td>0.2241</td>
    </tr>
    <tr>
      <th>1336</th>
      <td>005990</td>
      <td>매일홀딩스</td>
      <td>0.2092</td>
    </tr>
    <tr>
      <th>1349</th>
      <td>009200</td>
      <td>무림페이퍼</td>
      <td>0.1769</td>
    </tr>
    <tr>
      <th>1548</th>
      <td>016250</td>
      <td>SGC이테크건설</td>
      <td>0.1602</td>
    </tr>
    <tr>
      <th>1663</th>
      <td>040610</td>
      <td>SG&amp;G</td>
      <td>0.1540</td>
    </tr>
    <tr>
      <th>1732</th>
      <td>012320</td>
      <td>경동인베스트</td>
      <td>0.1675</td>
    </tr>
    <tr>
      <th>1781</th>
      <td>036000</td>
      <td>예림당</td>
      <td>0.2165</td>
    </tr>
    <tr>
      <th>1865</th>
      <td>005010</td>
      <td>휴스틸</td>
      <td>0.1501</td>
    </tr>
    <tr>
      <th>1977</th>
      <td>025530</td>
      <td>SJM홀딩스</td>
      <td>0.2189</td>
    </tr>
    <tr>
      <th>2000</th>
      <td>006200</td>
      <td>한국전자홀딩스</td>
      <td>0.1808</td>
    </tr>
    <tr>
      <th>2162</th>
      <td>058220</td>
      <td>아리온</td>
      <td>0.0184</td>
    </tr>
    <tr>
      <th>2165</th>
      <td>226350</td>
      <td>아이엠텍</td>
      <td>0.0598</td>
    </tr>
    <tr>
      <th>2172</th>
      <td>158310</td>
      <td>스타모빌리티</td>
      <td>0.2081</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="id11">
<h2>9.4.2 각 지표 결합하기<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rank_value</span>  <span class="o">=</span> <span class="n">KOR_value</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rank_value</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PER</th>
      <th>PBR</th>
      <th>PCR</th>
      <th>PSR</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>PER</th>
      <td>1.000000</td>
      <td>0.509783</td>
      <td>0.552118</td>
      <td>0.458765</td>
    </tr>
    <tr>
      <th>PBR</th>
      <td>0.509783</td>
      <td>1.000000</td>
      <td>0.640806</td>
      <td>0.760277</td>
    </tr>
    <tr>
      <th>PCR</th>
      <td>0.552118</td>
      <td>0.640806</td>
      <td>1.000000</td>
      <td>0.701528</td>
    </tr>
    <tr>
      <th>PSR</th>
      <td>0.458765</td>
      <td>0.760277</td>
      <td>0.701528</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">rank_value</span><span class="o">.</span><span class="n">corr</span><span class="p">(),</span> <span class="n">linewidths</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">square</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">linecolor</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="n">annot</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">annot_kws</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;size&quot;</span> <span class="p">:</span> <span class="mi">16</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:&gt;
</pre></div>
</div>
<img alt="_images/09_factor_basic_48_1.png" src="_images/09_factor_basic_48_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rank_value</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PER</th>
      <th>PBR</th>
      <th>PCR</th>
      <th>PSR</th>
    </tr>
    <tr>
      <th>종목코드</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>5930</th>
      <td>554.0</td>
      <td>1008.0</td>
      <td>606.0</td>
      <td>1185.0</td>
    </tr>
    <tr>
      <th>660</th>
      <td>801.0</td>
      <td>1018.0</td>
      <td>725.0</td>
      <td>1365.0</td>
    </tr>
    <tr>
      <th>51910</th>
      <td>1034.0</td>
      <td>1414.0</td>
      <td>897.0</td>
      <td>1254.0</td>
    </tr>
    <tr>
      <th>207940</th>
      <td>1044.0</td>
      <td>1621.0</td>
      <td>1247.0</td>
      <td>1660.0</td>
    </tr>
    <tr>
      <th>5380</th>
      <td>439.0</td>
      <td>357.0</td>
      <td>1194.0</td>
      <td>453.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>114570</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>80440</th>
      <td>NaN</td>
      <td>191.0</td>
      <td>NaN</td>
      <td>1031.0</td>
    </tr>
    <tr>
      <th>58420</th>
      <td>NaN</td>
      <td>210.0</td>
      <td>387.0</td>
      <td>517.0</td>
    </tr>
    <tr>
      <th>347140</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>158310</th>
      <td>NaN</td>
      <td>21.0</td>
      <td>NaN</td>
      <td>528.0</td>
    </tr>
  </tbody>
</table>
<p>2173 rows × 4 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rank_sum</span> <span class="o">=</span> <span class="n">rank_value</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">skipna</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">invest_value</span>  <span class="o">=</span> <span class="p">(</span><span class="n">rank_sum</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;first&#39;</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">30</span><span class="p">)</span>
<span class="n">invest_value_res</span> <span class="o">=</span> <span class="n">KOR_ticker</span><span class="p">[</span><span class="n">invest_value</span><span class="o">.</span><span class="n">values</span><span class="p">][[</span><span class="s1">&#39;종목코드&#39;</span><span class="p">,</span> <span class="s1">&#39;종목명&#39;</span><span class="p">]]</span>
 
<span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">invest_value_res</span><span class="p">,</span> <span class="n">KOR_value</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">invest_value</span><span class="o">.</span><span class="n">values</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="n">on</span> <span class="o">=</span> <span class="s1">&#39;종목코드&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>종목코드</th>
      <th>종목명</th>
      <th>PER</th>
      <th>PBR</th>
      <th>PCR</th>
      <th>PSR</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>078930</td>
      <td>GS</td>
      <td>6.498952</td>
      <td>0.321417</td>
      <td>2.228587</td>
      <td>0.198775</td>
    </tr>
    <tr>
      <th>1</th>
      <td>001040</td>
      <td>CJ</td>
      <td>10.901776</td>
      <td>0.199237</td>
      <td>0.753471</td>
      <td>0.086202</td>
    </tr>
    <tr>
      <th>2</th>
      <td>000210</td>
      <td>대림산업</td>
      <td>2.082829</td>
      <td>0.205602</td>
      <td>1.454612</td>
      <td>0.142790</td>
    </tr>
    <tr>
      <th>3</th>
      <td>000150</td>
      <td>두산</td>
      <td>2.067445</td>
      <td>0.127451</td>
      <td>1.108332</td>
      <td>0.046891</td>
    </tr>
    <tr>
      <th>4</th>
      <td>003380</td>
      <td>하림지주</td>
      <td>13.735015</td>
      <td>0.221385</td>
      <td>1.759196</td>
      <td>0.103896</td>
    </tr>
    <tr>
      <th>5</th>
      <td>009970</td>
      <td>영원무역홀딩스</td>
      <td>4.468192</td>
      <td>0.209905</td>
      <td>1.913810</td>
      <td>0.197462</td>
    </tr>
    <tr>
      <th>6</th>
      <td>093050</td>
      <td>LF</td>
      <td>6.315148</td>
      <td>0.306794</td>
      <td>2.788400</td>
      <td>0.230547</td>
    </tr>
    <tr>
      <th>7</th>
      <td>084690</td>
      <td>대상홀딩스</td>
      <td>5.133866</td>
      <td>0.306937</td>
      <td>1.873693</td>
      <td>0.104484</td>
    </tr>
    <tr>
      <th>8</th>
      <td>004690</td>
      <td>삼천리</td>
      <td>8.839525</td>
      <td>0.239884</td>
      <td>1.053718</td>
      <td>0.096526</td>
    </tr>
    <tr>
      <th>9</th>
      <td>213500</td>
      <td>한솔제지</td>
      <td>8.002944</td>
      <td>0.522983</td>
      <td>1.605405</td>
      <td>0.167373</td>
    </tr>
    <tr>
      <th>10</th>
      <td>001390</td>
      <td>KG케미칼</td>
      <td>3.282557</td>
      <td>0.233393</td>
      <td>2.150332</td>
      <td>0.152511</td>
    </tr>
    <tr>
      <th>11</th>
      <td>058650</td>
      <td>세아홀딩스</td>
      <td>9.584416</td>
      <td>0.097349</td>
      <td>0.806998</td>
      <td>0.059870</td>
    </tr>
    <tr>
      <th>12</th>
      <td>001940</td>
      <td>KISCO홀딩스</td>
      <td>6.061913</td>
      <td>0.203190</td>
      <td>3.996373</td>
      <td>0.228026</td>
    </tr>
    <tr>
      <th>13</th>
      <td>092230</td>
      <td>KPX홀딩스</td>
      <td>7.451635</td>
      <td>0.216364</td>
      <td>2.824211</td>
      <td>0.252985</td>
    </tr>
    <tr>
      <th>14</th>
      <td>005720</td>
      <td>넥센</td>
      <td>4.269047</td>
      <td>0.125330</td>
      <td>0.781712</td>
      <td>0.110299</td>
    </tr>
    <tr>
      <th>15</th>
      <td>036530</td>
      <td>S&amp;T홀딩스</td>
      <td>4.186838</td>
      <td>0.160943</td>
      <td>2.933603</td>
      <td>0.173056</td>
    </tr>
    <tr>
      <th>16</th>
      <td>008060</td>
      <td>대덕</td>
      <td>3.672307</td>
      <td>0.228173</td>
      <td>1.323096</td>
      <td>0.221256</td>
    </tr>
    <tr>
      <th>17</th>
      <td>002030</td>
      <td>아세아</td>
      <td>4.286588</td>
      <td>0.141410</td>
      <td>0.916246</td>
      <td>0.133956</td>
    </tr>
    <tr>
      <th>18</th>
      <td>065130</td>
      <td>탑엔지니어링</td>
      <td>4.536195</td>
      <td>0.438438</td>
      <td>3.390407</td>
      <td>0.125398</td>
    </tr>
    <tr>
      <th>19</th>
      <td>115160</td>
      <td>휴맥스</td>
      <td>7.714118</td>
      <td>0.360164</td>
      <td>1.904241</td>
      <td>0.128799</td>
    </tr>
    <tr>
      <th>20</th>
      <td>003960</td>
      <td>사조대림</td>
      <td>1.819579</td>
      <td>0.354558</td>
      <td>1.944337</td>
      <td>0.113031</td>
    </tr>
    <tr>
      <th>21</th>
      <td>003480</td>
      <td>한진중공업홀딩스</td>
      <td>3.927562</td>
      <td>0.330111</td>
      <td>1.776196</td>
      <td>0.135603</td>
    </tr>
    <tr>
      <th>22</th>
      <td>013570</td>
      <td>디와이</td>
      <td>9.452600</td>
      <td>0.326845</td>
      <td>1.942640</td>
      <td>0.181462</td>
    </tr>
    <tr>
      <th>23</th>
      <td>010100</td>
      <td>한국프랜지</td>
      <td>8.681041</td>
      <td>0.433862</td>
      <td>1.839477</td>
      <td>0.103736</td>
    </tr>
    <tr>
      <th>24</th>
      <td>267290</td>
      <td>경동도시가스</td>
      <td>4.367413</td>
      <td>0.315081</td>
      <td>3.147106</td>
      <td>0.075210</td>
    </tr>
    <tr>
      <th>25</th>
      <td>005990</td>
      <td>매일홀딩스</td>
      <td>5.311290</td>
      <td>0.209193</td>
      <td>1.195569</td>
      <td>0.075456</td>
    </tr>
    <tr>
      <th>26</th>
      <td>005710</td>
      <td>대원산업</td>
      <td>3.197816</td>
      <td>0.401524</td>
      <td>3.542057</td>
      <td>0.189160</td>
    </tr>
    <tr>
      <th>27</th>
      <td>101330</td>
      <td>모베이스</td>
      <td>2.099590</td>
      <td>0.281615</td>
      <td>1.170388</td>
      <td>0.148339</td>
    </tr>
    <tr>
      <th>28</th>
      <td>016250</td>
      <td>SGC이테크건설</td>
      <td>4.287667</td>
      <td>0.160209</td>
      <td>0.878361</td>
      <td>0.048973</td>
    </tr>
    <tr>
      <th>29</th>
      <td>012320</td>
      <td>경동인베스트</td>
      <td>7.627849</td>
      <td>0.167463</td>
      <td>2.142390</td>
      <td>0.255384</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="id12">
<h2>9.5 퀄리티 전략<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<div class="section" id="f-score">
<h3>9.5.1 F-Score<a class="headerlink" href="#f-score" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;data/KOR_fs.pickle&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">KOR_fs</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="n">KOR_ticker</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/KOR_ticker.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">KOR_ticker</span><span class="p">[</span><span class="s1">&#39;종목코드&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">KOR_ticker</span><span class="p">[</span><span class="s1">&#39;종목코드&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">str</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>    
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">KOR_fs</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;매출액&#39;:           2017/12    2018/12    2019/12
 종목코드                                   
 005930  2395754.0  2437714.0  2304009.0
 000660   301094.0   404451.0   269907.0
 051910   256980.0   281830.0   286250.0
 207940     4646.0     5358.0     7016.0
 005380   963761.0   968126.0  1057464.0
 ...           ...        ...        ...
 114570      962.0      316.0      124.0
 080440       88.0       63.0       41.0
 058420       69.0      127.0      114.0
 347140        NaN        NaN        NaN
 158310      135.0       49.0      101.0
 
 [2173 rows x 3 columns],
 &#39;매출원가&#39;:           2017/12    2018/12    2019/12
 종목코드                                   
 005930  1292907.0  1323944.0  1472395.0
 000660   127018.0   151808.0   188253.0
 051910   201345.0   228368.0   237792.0
 207940     3328.0     3906.0     5096.0
 005380   787982.0   816705.0   880914.0
 ...           ...        ...        ...
 114570      581.0      203.0      170.0
 080440       71.0       61.0       42.0
 058420       62.0      109.0       96.0
 347140        NaN        NaN        NaN
 158310       83.0       31.0       46.0
 
 [2173 rows x 3 columns],
 &#39;매출총이익&#39;:           2017/12    2018/12   2019/12
 종목코드                                  
 005930  1102847.0  1113770.0  831613.0
 000660   174076.0   252642.0   81655.0
 051910    55635.0    53462.0   48458.0
 207940     1318.0     1452.0    1920.0
 005380   175779.0   151421.0  176550.0
 ...           ...        ...       ...
 114570      381.0      113.0     -46.0
 080440       17.0        2.0      -0.0
 058420        8.0       18.0      18.0
 347140        NaN        NaN       NaN
 158310       52.0       17.0      55.0
 
 [2173 rows x 3 columns],
 &#39;판매비와관리비&#39;:          2017/12   2018/12   2019/12
 종목코드                                
 005930  566397.0  524903.0  553928.0
 000660   36863.0   44205.0   54527.0
 051910   26351.0   31001.0   39502.0
 207940     658.0     895.0    1003.0
 005380  130032.0  127200.0  140495.0
 ...          ...       ...       ...
 114570     167.0     204.0     590.0
 080440      65.0      84.0      55.0
 058420      32.0      32.0      31.0
 347140       NaN       NaN       NaN
 158310      55.0      71.0     104.0
 
 [2173 rows x 3 columns],
 &#39;영업이익&#39;:          2017/12   2018/12   2019/12
 종목코드                                
 005930  536450.0  588867.0  277685.0
 000660  137213.0  208438.0   27127.0
 051910   29285.0   22461.0    8956.0
 207940     660.0     557.0     917.0
 005380   45747.0   24222.0   36055.0
 ...          ...       ...       ...
 114570     213.0     -91.0    -636.0
 080440     -49.0     -82.0     -55.0
 058420     -24.0     -14.0     -12.0
 347140       NaN       NaN       NaN
 158310      -3.0     -54.0     -49.0
 
 [2173 rows x 3 columns],
 &#39;영업이익(발표기준)&#39;:          2017/12   2018/12   2019/12
 종목코드                                
 005930  536450.0  588867.0  277685.0
 000660  137213.0  208438.0   27127.0
 051910   29285.0   22461.0    8956.0
 207940     660.0     557.0     917.0
 005380   45747.0   24222.0   36055.0
 ...          ...       ...       ...
 114570     213.0     -91.0    -636.0
 080440     -49.0     -82.0     -55.0
 058420     -24.0     -14.0     -12.0
 347140       NaN       NaN       NaN
 158310      -3.0     -54.0     -49.0
 
 [2173 rows x 3 columns],
 &#39;금융수익&#39;:         2017/12  2018/12   2019/12
 종목코드                              
 005930  97374.0  99993.0  101616.0
 000660   9965.0  16920.0   12476.0
 051910   2404.0   2104.0    2908.0
 207940    232.0    193.0     275.0
 005380   9729.0   8235.0    8271.0
 ...         ...      ...       ...
 114570     22.0     29.0      23.0
 080440      9.0      2.0       1.0
 058420      0.0      3.0       6.0
 347140      NaN      NaN       NaN
 158310     12.0     10.0       8.0
 
 [2173 rows x 3 columns],
 &#39;금융원가&#39;:         2017/12  2018/12  2019/12
 종목코드                             
 005930  89789.0  86089.0  82749.0
 000660  12496.0  11421.0  15149.0
 051910   3198.0   3675.0   4368.0
 207940    763.0    243.0    387.0
 005380  11204.0   6009.0   4752.0
 ...         ...      ...      ...
 114570     18.0     26.0     28.0
 080440     12.0     23.0     39.0
 058420      0.0      5.0      6.0
 347140      NaN      NaN      NaN
 158310     29.0     26.0     40.0
 
 [2173 rows x 3 columns],
 &#39;기타수익&#39;:         2017/12  2018/12  2019/12
 종목코드                             
 005930  30107.0  14850.0  17787.0
 000660    779.0   1128.0    882.0
 051910   4783.0   3772.0   5529.0
 207940      9.0   3904.0     40.0
 005380  11537.0   9673.0  11210.0
 ...         ...      ...      ...
 114570     14.0      9.0     49.0
 080440     16.0      5.0     64.0
 058420      0.0      0.0      5.0
 347140      NaN      NaN      NaN
 158310      1.0      6.0      5.0
 
 [2173 rows x 3 columns],
 &#39;기타비용&#39;:         2017/12  2018/12  2019/12
 종목코드                             
 005930  14196.0  11420.0  14147.0
 000660   1189.0   1784.0   1136.0
 051910   7700.0   5312.0   7641.0
 207940      1.0     87.0     21.0
 005380  13675.0  14870.0  14574.0
 ...         ...      ...      ...
 114570     47.0     50.0    224.0
 080440     34.0     11.0     20.0
 058420     17.0     10.0     18.0
 347140      NaN      NaN      NaN
 158310     45.0     13.0      7.0
 
 [2173 rows x 3 columns],
 &#39;종속기업,공동지배기업및관계기업관련손익&#39;:         2017/12  2018/12  2019/12
 종목코드                             
 005930   2014.0   5398.0   4130.0
 000660    124.0    130.0    226.0
 051910     66.0     51.0    222.0
 207940  -1296.0  -1293.0    729.0
 005380   2251.0   4045.0   5428.0
 ...         ...      ...      ...
 114570      NaN      NaN      NaN
 080440     -3.0      NaN      NaN
 058420     -1.0     -3.0     -1.0
 347140      NaN      NaN      NaN
 158310      NaN    -26.0     -0.0
 
 [2173 rows x 3 columns],
 &#39;세전계속사업이익&#39;:          2017/12   2018/12   2019/12
 종목코드                                
 005930  561960.0  611600.0  304322.0
 000660  134396.0  213410.0   24427.0
 051910   25639.0   19400.0    5606.0
 207940   -1160.0    3030.0    1554.0
 005380   44386.0   25296.0   41638.0
 ...          ...       ...       ...
 114570     184.0    -129.0    -816.0
 080440     -72.0    -109.0     -49.0
 058420     -41.0     -29.0     -27.0
 347140       NaN       NaN       NaN
 158310     -64.0    -103.0     -84.0
 
 [2173 rows x 3 columns],
 &#39;법인세비용&#39;:          2017/12   2018/12  2019/12
 종목코드                               
 005930  140092.0  168151.0  86933.0
 000660   27973.0   58010.0   4263.0
 051910    5419.0    4207.0   1845.0
 207940    -190.0     789.0   -475.0
 005380   -1079.0    8846.0   9781.0
 ...          ...       ...      ...
 114570      44.0       8.0     -5.0
 080440       3.0      -0.0     -0.0
 058420       NaN       0.0      1.0
 347140       NaN       NaN      NaN
 158310       NaN       NaN      NaN
 
 [2173 rows x 3 columns],
 &#39;계속영업이익&#39;:          2017/12   2018/12   2019/12
 종목코드                                
 005930  421867.0  443449.0  217389.0
 000660  106422.0  155400.0   20164.0
 051910   20220.0   15193.0    3761.0
 207940    -970.0    2241.0    2029.0
 005380   45464.0   16450.0   31856.0
 ...          ...       ...       ...
 114570     140.0    -137.0    -810.0
 080440     -75.0    -109.0     -49.0
 058420     -41.0     -30.0     -28.0
 347140       NaN       NaN       NaN
 158310     -64.0    -103.0     -84.0
 
 [2173 rows x 3 columns],
 &#39;중단영업이익&#39;:         2017/12  2018/12  2019/12
 종목코드                             
 005930      NaN      NaN      NaN
 000660      NaN      NaN      NaN
 051910      NaN      NaN      NaN
 207940      NaN      NaN      NaN
 005380      NaN      NaN      NaN
 ...         ...      ...      ...
 114570      NaN      NaN      NaN
 080440      0.0      NaN    -60.0
 058420      NaN      0.0     -2.0
 347140      NaN      NaN      NaN
 158310      NaN      NaN      NaN
 
 [2173 rows x 3 columns],
 &#39;당기순이익&#39;:          2017/12   2018/12   2019/12
 종목코드                                
 005930  421867.0  443449.0  217389.0
 000660  106422.0  155400.0   20164.0
 051910   20220.0   15193.0    3761.0
 207940    -970.0    2241.0    2029.0
 005380   45464.0   16450.0   31856.0
 ...          ...       ...       ...
 114570     140.0    -137.0    -810.0
 080440     -75.0    -109.0    -109.0
 058420     -41.0     -30.0     -30.0
 347140       NaN       NaN       NaN
 158310     -64.0    -103.0     -84.0
 
 [2173 rows x 3 columns],
 &#39;지배주주순이익&#39;:          2017/12   2018/12   2019/12
 종목코드                                
 005930  413446.0  438909.0  215051.0
 000660  106415.0  155401.0   20133.0
 051910   19453.0   14726.0    3134.0
 207940    -970.0       NaN    2029.0
 005380   40328.0   15081.0   29800.0
 ...          ...       ...       ...
 114570       NaN       NaN       NaN
 080440     -75.0    -109.0    -109.0
 058420     -35.0     -30.0     -30.0
 347140       NaN       NaN       NaN
 158310     -54.0    -103.0     -84.0
 
 [2173 rows x 3 columns],
 &#39;비지배주주순이익&#39;:         2017/12  2018/12  2019/12
 종목코드                             
 005930   8422.0   4540.0   2338.0
 000660      7.0     -1.0     31.0
 051910    767.0    467.0    627.0
 207940      NaN      NaN      NaN
 005380   5136.0   1369.0   2056.0
 ...         ...      ...      ...
 114570      NaN      NaN      NaN
 080440      NaN      NaN      NaN
 058420     -6.0      0.0      0.0
 347140      NaN      NaN      NaN
 158310    -10.0     -0.0      NaN
 
 [2173 rows x 3 columns],
 &#39;자산&#39;:           2017/12    2018/12    2019/12
 종목코드                                   
 005930  3017521.0  3393572.0  3525645.0
 000660   454185.0   636583.0   647895.0
 051910   250412.0   289441.0   340244.0
 207940    71831.0    59804.0    59116.0
 005380  1781995.0  1806558.0  1945122.0
 ...           ...        ...        ...
 114570     1697.0     1535.0      956.0
 080440      455.0      596.0      553.0
 058420       79.0      215.0      211.0
 347140        NaN        NaN        NaN
 158310      324.0      442.0      744.0
 
 [2173 rows x 3 columns],
 &#39;유동자산&#39;:           2017/12    2018/12    2019/12
 종목코드                                   
 005930  1469825.0  1746974.0  1813853.0
 000660   173104.0   198941.0   144576.0
 051910   112056.0   120885.0   118697.0
 207940     6210.0    15777.0    13563.0
 005380   484397.0   471435.0   459047.0
 ...           ...        ...        ...
 114570      623.0      659.0      236.0
 080440       27.0      110.0       61.0
 058420       45.0       93.0      122.0
 347140        NaN        NaN        NaN
 158310      217.0      147.0      455.0
 
 [2173 rows x 3 columns],
 &#39;비유동자산&#39;:           2017/12    2018/12    2019/12
 종목코드                                   
 005930  1547696.0  1646598.0  1711792.0
 000660   281080.0   437642.0   503319.0
 051910   138356.0   168556.0   221547.0
 207940    65621.0    44027.0    45554.0
 005380   785917.0   790106.0   863489.0
 ...           ...        ...        ...
 114570     1075.0      876.0      719.0
 080440      429.0      486.0      492.0
 058420       34.0      122.0       89.0
 347140        NaN        NaN        NaN
 158310      107.0      295.0      289.0
 
 [2173 rows x 3 columns],
 &#39;기타금융업자산&#39;:          2017/12   2018/12   2019/12
 종목코드                                
 005930       NaN       NaN       NaN
 000660       NaN       NaN       NaN
 051910       NaN       NaN       NaN
 207940       NaN       NaN       NaN
 005380  511680.0  545017.0  622586.0
 ...          ...       ...       ...
 114570       NaN       NaN       NaN
 080440       NaN       NaN       NaN
 058420       NaN       NaN       NaN
 347140       NaN       NaN       NaN
 158310       NaN       NaN       NaN
 
 [2173 rows x 3 columns],
 &#39;부채&#39;:           2017/12    2018/12    2019/12
 종목코드                                   
 005930   872607.0   916041.0   896841.0
 000660   115975.0   168060.0   168463.0
 051910    87026.0   116220.0   166406.0
 207940    32066.0    18249.0    15572.0
 005380  1034421.0  1067597.0  1181465.0
 ...           ...        ...        ...
 114570      586.0      432.0      482.0
 080440      322.0      466.0      421.0
 058420       12.0      111.0       83.0
 347140        NaN        NaN        NaN
 158310      133.0      242.0      451.0
 
 [2173 rows x 3 columns],
 &#39;유동부채&#39;:          2017/12   2018/12   2019/12
 종목코드                                
 005930  671751.0  690815.0  637828.0
 000660   81161.0  130319.0   78740.0
 051910   66447.0   72735.0   89415.0
 207940   22874.0    7105.0    6905.0
 005380  431607.0  494384.0  533141.0
 ...          ...       ...       ...
 114570     420.0     220.0     284.0
 080440     285.0     402.0     350.0
 058420      11.0     104.0      75.0
 347140       NaN       NaN       NaN
 158310     132.0     240.0     447.0
 
 [2173 rows x 3 columns],
 &#39;비유동부채&#39;:          2017/12   2018/12   2019/12
 종목코드                                
 005930  200855.0  225226.0  259013.0
 000660   34814.0   37742.0   89723.0
 051910   20580.0   43485.0   76991.0
 207940    9192.0   11144.0    8667.0
 005380  602814.0  573213.0  648324.0
 ...          ...       ...       ...
 114570     166.0     212.0     198.0
 080440      37.0      64.0      71.0
 058420       1.0       7.0       8.0
 347140       NaN       NaN       NaN
 158310       1.0       2.0       4.0
 
 [2173 rows x 3 columns],
 &#39;기타금융업부채&#39;:         2017/12  2018/12  2019/12
 종목코드                             
 005930      NaN      NaN      NaN
 000660      NaN      NaN      NaN
 051910      NaN      NaN      NaN
 207940      NaN      NaN      NaN
 005380      NaN      NaN      NaN
 ...         ...      ...      ...
 114570      NaN      NaN      NaN
 080440      NaN      NaN      NaN
 058420      NaN      NaN      NaN
 347140      NaN      NaN      NaN
 158310      NaN      NaN      NaN
 
 [2173 rows x 3 columns],
 &#39;자본&#39;:           2017/12    2018/12    2019/12
 종목코드                                   
 005930  2144914.0  2477532.0  2628804.0
 000660   338209.0   468523.0   479432.0
 051910   163386.0   173221.0   173838.0
 207940    39765.0    41555.0    43545.0
 005380   747574.0   738960.0   763658.0
 ...           ...        ...        ...
 114570     1112.0     1104.0      474.0
 080440      133.0      131.0      133.0
 058420       67.0      104.0      128.0
 347140        NaN        NaN        NaN
 158310      190.0      200.0      293.0
 
 [2173 rows x 3 columns],
 &#39;지배기업주주지분&#39;:           2017/12    2018/12    2019/12
 종목코드                                   
 005930  2072134.0  2400690.0  2549155.0
 000660   338153.0   468457.0   479284.0
 051910   161685.0   170830.0   170050.0
 207940    39765.0        NaN    43545.0
 005380   691035.0   679740.0   700658.0
 ...           ...        ...        ...
 114570        NaN        NaN        NaN
 080440      133.0      131.0      133.0
 058420       67.0      103.0      128.0
 347140        NaN        NaN        NaN
 158310      198.0      200.0      293.0
 
 [2173 rows x 3 columns],
 &#39;비지배주주지분&#39;:         2017/12  2018/12  2019/12
 종목코드                             
 005930  72780.0  76842.0  79649.0
 000660     56.0     66.0    148.0
 051910   1701.0   2391.0   3788.0
 207940      NaN      NaN      NaN
 005380  56539.0  59220.0  63000.0
 ...         ...      ...      ...
 114570      NaN      NaN      NaN
 080440     -0.0      NaN      NaN
 058420      1.0      1.0      0.0
 347140      NaN      NaN      NaN
 158310     -7.0      NaN      NaN
 
 [2173 rows x 3 columns],
 &#39;영업활동으로인한현금흐름&#39;:          2017/12   2018/12   2019/12
 종목코드                                
 005930  621620.0  670319.0  453829.0
 000660  146906.0  222272.0   64832.0
 051910   31807.0   21250.0   31211.0
 207940    1498.0    -330.0     102.0
 005380   39224.0   37643.0    4198.0
 ...          ...       ...       ...
 114570    -244.0       5.0      32.0
 080440     -52.0     -63.0     -66.0
 058420     -17.0     -17.0      10.0
 347140       NaN       NaN       NaN
 158310      -6.0     -99.0    -242.0
 
 [2173 rows x 3 columns],
 &#39;당기순손익&#39;:          2017/12   2018/12   2019/12
 종목코드                                
 005930  421867.0  443449.0  217389.0
 000660  106422.0  155400.0   20164.0
 051910       NaN       NaN       NaN
 207940    -970.0    2241.0    2029.0
 005380   45464.0   16450.0   31856.0
 ...          ...       ...       ...
 114570     140.0    -137.0    -810.0
 080440     -75.0    -109.0    -109.0
 058420     -41.0     -30.0     -30.0
 347140       NaN       NaN       NaN
 158310     -64.0    -103.0     -84.0
 
 [2173 rows x 3 columns],
 &#39;법인세비용차감전계속사업이익&#39;:         2017/12  2018/12  2019/12
 종목코드                             
 005930      NaN      NaN      NaN
 000660      NaN      NaN      NaN
 051910  25639.0  19400.0   5606.0
 207940      NaN      NaN      NaN
 005380      NaN      NaN      NaN
 ...         ...      ...      ...
 114570      NaN      NaN      NaN
 080440      NaN      NaN      NaN
 058420      NaN      NaN      NaN
 347140      NaN      NaN      NaN
 158310      NaN      NaN      NaN
 
 [2173 rows x 3 columns],
 &#39;현금유출이없는비용등가산&#39;:          2017/12   2018/12   2019/12
 종목코드                                
 005930  413191.0  484356.0  424268.0
 000660   83829.0  127677.0   99534.0
 051910   21138.0   23444.0   33582.0
 207940    2728.0    3498.0    1886.0
 005380  135242.0  148440.0  159572.0
 ...          ...       ...       ...
 114570     147.0     155.0     839.0
 080440      68.0      76.0     123.0
 058420      36.0      33.0      50.0
 347140       NaN       NaN       NaN
 158310      78.0      87.0      56.0
 
 [2173 rows x 3 columns],
 &#39;(현금유입이없는수익등차감)&#39;:         2017/12  2018/12  2019/12
 종목코드                             
 005930  51079.0  48310.0  49842.0
 000660   4618.0   4857.0   4176.0
 051910   2465.0   1323.0   1969.0
 207940    414.0   4014.0   1417.0
 005380   7431.0   8076.0   8112.0
 ...         ...      ...      ...
 114570     30.0     35.0     64.0
 080440     23.0      7.0     60.0
 058420      2.0      5.0      6.0
 347140      NaN      NaN      NaN
 158310     14.0     24.0     12.0
 
 [2173 rows x 3 columns],
 &#39;영업활동으로인한자산부채변동(운전자본변동)&#39;:          2017/12  2018/12   2019/12
 종목코드                               
 005930 -106205.0 -99244.0  -25458.0
 000660  -31901.0 -19969.0    2701.0
 051910   -7148.0 -12644.0    1146.0
 207940     218.0  -1896.0   -1879.0
 005380 -113843.0 -95928.0 -156443.0
 ...          ...      ...       ...
 114570    -497.0     27.0      80.0
 080440     -11.0    -12.0      -8.0
 058420     -10.0    -16.0      -1.0
 347140       NaN      NaN       NaN
 158310      -7.0    -60.0    -195.0
 
 [2173 rows x 3 columns],
 &#39;*영업에서창출된현금흐름&#39;:          2017/12   2018/12   2019/12
 종목코드                                
 005930  677774.0  780251.0  566358.0
 000660  153733.0  258250.0  118224.0
 051910   37164.0   28878.0   38365.0
 207940    1563.0    -170.0     620.0
 005380   59432.0   60887.0   26873.0
 ...          ...       ...       ...
 114570    -239.0       9.0      45.0
 080440     -41.0     -52.0     -54.0
 058420     -17.0     -19.0      12.0
 347140       NaN       NaN       NaN
 158310      -7.0    -100.0    -234.0
 
 [2173 rows x 3 columns],
 &#39;기타영업활동으로인한현금흐름&#39;:         2017/12   2018/12   2019/12
 종목코드                               
 005930 -56154.0 -109932.0 -112529.0
 000660  -6826.0  -35978.0  -53392.0
 051910  -5357.0   -7629.0   -7154.0
 207940    -65.0    -160.0    -518.0
 005380 -20208.0  -23244.0  -22675.0
 ...         ...       ...       ...
 114570     -5.0      -4.0     -12.0
 080440    -11.0     -12.0     -11.0
 058420      0.0       2.0      -2.0
 347140      NaN       NaN       NaN
 158310      1.0       2.0      -8.0
 
 [2173 rows x 3 columns],
 &#39;투자활동으로인한현금흐름&#39;:          2017/12   2018/12   2019/12
 종목코드                                
 005930 -493852.0 -522405.0 -399482.0
 000660 -119192.0 -214287.0 -104509.0
 051910  -16404.0  -36390.0  -61114.0
 207940    2652.0   -6314.0    3396.0
 005380  -47444.0  -24151.0  -59292.0
 ...          ...       ...       ...
 114570     -25.0     -76.0    -277.0
 080440     -25.0     -69.0      -6.0
 058420     -23.0     -51.0     -32.0
 347140       NaN       NaN       NaN
 158310     -43.0    -175.0      22.0
 
 [2173 rows x 3 columns],
 &#39;투자활동으로인한현금유입액&#39;:         2017/12  2018/12  2019/12
 종목코드                             
 005930  47434.0   9213.0  63008.0
 000660   9346.0  43551.0  44616.0
 051910  15802.0  15619.0   7346.0
 207940  22700.0  42395.0  48800.0
 005380   5256.0  29370.0   7165.0
 ...         ...      ...      ...
 114570     56.0    153.0    117.0
 080440     17.0      0.0     91.0
 058420     13.0      1.0     15.0
 347140      NaN      NaN      NaN
 158310     75.0     97.0    844.0
 
 [2173 rows x 3 columns],
 &#39;(투자활동으로인한현금유출액)&#39;:          2017/12   2018/12   2019/12
 종목코드                                
 005930  541286.0  531617.0  462489.0
 000660  128538.0  257838.0  149126.0
 051910   32205.0   52010.0   68460.0
 207940   20048.0   48709.0   45404.0
 005380   52700.0   53521.0   66457.0
 ...          ...       ...       ...
 114570      81.0     229.0     394.0
 080440      43.0      70.0      97.0
 058420      35.0      52.0      47.0
 347140       NaN       NaN       NaN
 158310     118.0     272.0     822.0
 
 [2173 rows x 3 columns],
 &#39;기타투자활동으로인한현금흐름&#39;:         2017/12  2018/12  2019/12
 종목코드                             
 005930      NaN      NaN      NaN
 000660      NaN      NaN      NaN
 051910      NaN      NaN      NaN
 207940      NaN      NaN      NaN
 005380      NaN      NaN      NaN
 ...         ...      ...      ...
 114570      NaN      NaN      NaN
 080440      NaN      NaN      NaN
 058420      NaN      NaN      NaN
 347140      NaN      NaN      NaN
 158310      NaN      NaN      NaN
 
 [2173 rows x 3 columns],
 &#39;재무활동으로인한현금흐름&#39;:          2017/12   2018/12  2019/12
 종목코드                               
 005930 -125609.0 -150902.0 -94845.0
 000660   -3519.0  -13953.0  39032.0
 051910   -7365.0   17938.0  23006.0
 207940   -2872.0    3239.0  -2398.0
 005380   21812.0   -8808.0  48749.0
 ...          ...       ...      ...
 114570     238.0      96.0    203.0
 080440      68.0     138.0     68.0
 058420      16.0      69.0     28.0
 347140       NaN       NaN      NaN
 158310       6.0     276.0    310.0
 
 [2173 rows x 3 columns],
 &#39;재무활동으로인한현금유입액&#39;:          2017/12   2018/12   2019/12
 종목코드                                
 005930   37347.0     117.0    8658.0
 000660    7823.0   31257.0   98386.0
 051910   13851.0   30365.0   40858.0
 207940    1799.0    3927.0    1500.0
 005380  295840.0  210290.0  271311.0
 ...          ...       ...       ...
 114570     272.0     190.0     573.0
 080440      97.0     182.0     202.0
 058420      16.0      90.0      55.0
 347140       NaN       NaN       NaN
 158310      41.0     357.0     356.0
 
 [2173 rows x 3 columns],
 &#39;(재무활동으로인한현금유출액)&#39;:          2017/12   2018/12   2019/12
 종목코드                                
 005930   94912.0   49082.0    7111.0
 000660    7106.0   38150.0   49094.0
 051910   17359.0    7488.0   13012.0
 207940    4671.0     688.0    3898.0
 005380  262641.0  207823.0  211343.0
 ...          ...       ...       ...
 114570      34.0      94.0     370.0
 080440      29.0      44.0     134.0
 058420       NaN      21.0      27.0
 347140       NaN       NaN       NaN
 158310      35.0      82.0      46.0
 
 [2173 rows x 3 columns],
 &#39;기타재무활동으로인한현금흐름&#39;:         2017/12   2018/12  2019/12
 종목코드                              
 005930 -68043.0 -101937.0 -96392.0
 000660  -4236.0   -7060.0 -10260.0
 051910  -3857.0   -4939.0  -4839.0
 207940      NaN       NaN      NaN
 005380 -11387.0  -11275.0 -11218.0
 ...         ...       ...      ...
 114570      NaN       NaN      NaN
 080440      NaN       NaN      NaN
 058420      NaN       NaN      NaN
 347140      NaN       NaN      NaN
 158310      NaN       NaN      NaN
 
 [2173 rows x 3 columns],
 &#39;영업투자재무활동기타현금흐름&#39;:         2017/12  2018/12  2019/12
 종목코드                             
 005930      NaN      NaN      NaN
 000660      NaN      NaN      NaN
 051910      NaN      NaN      NaN
 207940      NaN      NaN      NaN
 005380      NaN   -971.0      NaN
 ...         ...      ...      ...
 114570      NaN      NaN      NaN
 080440      NaN      NaN      NaN
 058420      NaN      NaN      NaN
 347140      NaN      NaN      NaN
 158310      NaN      NaN      NaN
 
 [2173 rows x 3 columns],
 &#39;연결범위변동으로인한현금의증가&#39;:         2017/12  2018/12  2019/12
 종목코드                             
 005930      NaN      NaN      NaN
 000660      NaN      NaN      NaN
 051910      NaN      NaN      NaN
 207940      NaN      NaN      NaN
 005380      NaN      NaN      NaN
 ...         ...      ...      ...
 114570      NaN      NaN      NaN
 080440      NaN     -0.0      NaN
 058420      NaN      NaN      NaN
 347140      NaN      NaN      NaN
 158310      NaN      NaN      NaN
 
 [2173 rows x 3 columns],
 &#39;환율변동효과&#39;:         2017/12  2018/12  2019/12
 종목코드                             
 005930 -17823.0    942.0   5953.0
 000660   -833.0    -38.0    213.0
 051910   -289.0   -154.0    646.0
 207940     -1.0      NaN    -25.0
 005380  -4278.0   -793.0   2028.0
 ...         ...      ...      ...
 114570     -0.0     -0.0     -0.0
 080440     -1.0     -0.0      0.0
 058420      NaN      NaN      NaN
 347140      NaN      NaN      NaN
 158310     -1.0     -0.0     -0.0
 
 [2173 rows x 3 columns],
 &#39;현금및현금성자산의증가&#39;:         2017/12  2018/12  2019/12
 종목코드                             
 005930 -15663.0  -2046.0 -34545.0
 000660  23362.0  -6007.0   -432.0
 051910   7750.0   2644.0  -6251.0
 207940   1278.0  -3405.0   1075.0
 005380   9314.0   2921.0  -4317.0
 ...         ...      ...      ...
 114570    -32.0     25.0    -42.0
 080440     -9.0      5.0     -4.0
 058420    -23.0      1.0      5.0
 347140      NaN      NaN      NaN
 158310    -44.0      2.0     90.0
 
 [2173 rows x 3 columns],
 &#39;기초현금및현금성자산&#39;:          2017/12   2018/12   2019/12
 종목코드                                
 005930  321114.0  305451.0  303405.0
 000660    6138.0   29500.0   23493.0
 051910   14744.0   22493.0   25137.0
 207940    2303.0    3581.0     176.0
 005380   78901.0   88215.0   91136.0
 ...          ...       ...       ...
 114570      58.0      26.0      51.0
 080440      11.0       1.0       7.0
 058420      51.0      28.0      29.0
 347140       NaN       NaN       NaN
 158310      79.0      35.0      36.0
 
 [2173 rows x 3 columns],
 &#39;기말현금및현금성자산&#39;:          2017/12   2018/12   2019/12
 종목코드                                
 005930  305451.0  303405.0  268860.0
 000660   29500.0   23493.0   23061.0
 051910   22493.0   25137.0   18886.0
 207940    3581.0     176.0    1251.0
 005380   88215.0   91136.0   86820.0
 ...          ...       ...       ...
 114570      26.0      51.0       9.0
 080440       1.0       7.0       3.0
 058420      28.0      29.0      35.0
 347140       NaN       NaN       NaN
 158310      35.0      36.0     126.0
 
 [2173 rows x 3 columns]}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 수익성</span>

<span class="n">ROA</span> <span class="o">=</span> <span class="n">KOR_fs</span><span class="p">[</span><span class="s1">&#39;지배주주순이익&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">KOR_fs</span><span class="p">[</span><span class="s1">&#39;자산&#39;</span><span class="p">]</span>
<span class="n">CFO</span> <span class="o">=</span> <span class="n">KOR_fs</span><span class="p">[</span><span class="s1">&#39;영업활동으로인한현금흐름&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">KOR_fs</span><span class="p">[</span><span class="s1">&#39;자산&#39;</span><span class="p">]</span>
<span class="n">ACCURUAL</span> <span class="o">=</span> <span class="n">CFO</span> <span class="o">-</span> <span class="n">ROA</span>

<span class="c1"># 재무성과</span>
<span class="n">LEV</span> <span class="o">=</span> <span class="n">KOR_fs</span><span class="p">[</span><span class="s1">&#39;장기차입금&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">KOR_fs</span><span class="p">[</span><span class="s1">&#39;자산&#39;</span><span class="p">]</span>
<span class="n">LIQ</span> <span class="o">=</span> <span class="n">KOR_fs</span><span class="p">[</span><span class="s1">&#39;유동자산&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">KOR_fs</span><span class="p">[</span><span class="s1">&#39;유동부채&#39;</span><span class="p">]</span>
<span class="n">OFFER</span> <span class="o">=</span> <span class="n">KOR_fs</span><span class="p">[</span><span class="s1">&#39;유상증자&#39;</span><span class="p">]</span>

<span class="c1"># 운영 효율성</span>
<span class="n">MARGIN</span> <span class="o">=</span> <span class="n">KOR_fs</span><span class="p">[</span><span class="s1">&#39;매출총이익&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">KOR_fs</span><span class="p">[</span><span class="s1">&#39;매출액&#39;</span><span class="p">]</span>
<span class="n">TURN</span> <span class="o">=</span> <span class="n">KOR_fs</span><span class="p">[</span><span class="s1">&#39;매출액&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">KOR_fs</span><span class="p">[</span><span class="s1">&#39;자산&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyError</span><span class="g g-Whitespace">                                  </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">216</span><span class="o">-</span><span class="mi">4</span><span class="n">f72ffb4bb30</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> 
<span class="g g-Whitespace">      </span><span class="mi">7</span> <span class="c1"># 재무성과</span>
<span class="ne">----&gt; </span><span class="mi">8</span> <span class="n">LEV</span> <span class="o">=</span> <span class="n">KOR_fs</span><span class="p">[</span><span class="s1">&#39;장기차입금&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">KOR_fs</span><span class="p">[</span><span class="s1">&#39;자산&#39;</span><span class="p">]</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span> <span class="n">LIQ</span> <span class="o">=</span> <span class="n">KOR_fs</span><span class="p">[</span><span class="s1">&#39;유동자산&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">KOR_fs</span><span class="p">[</span><span class="s1">&#39;유동부채&#39;</span><span class="p">]</span>
<span class="g g-Whitespace">     </span><span class="mi">10</span> <span class="n">OFFER</span> <span class="o">=</span> <span class="n">KOR_fs</span><span class="p">[</span><span class="s1">&#39;유상증자&#39;</span><span class="p">]</span>

<span class="ne">KeyError</span>: &#39;장기차입금&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ACCURUAL</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>2017/12</th>
      <th>2018/12</th>
      <th>2019/12</th>
    </tr>
    <tr>
      <th>종목코드</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>005930</th>
      <td>0.068988</td>
      <td>0.068191</td>
      <td>0.067726</td>
    </tr>
    <tr>
      <th>000660</th>
      <td>0.089151</td>
      <td>0.105047</td>
      <td>0.068991</td>
    </tr>
    <tr>
      <th>051910</th>
      <td>0.049335</td>
      <td>0.022540</td>
      <td>0.082520</td>
    </tr>
    <tr>
      <th>207940</th>
      <td>0.034358</td>
      <td>NaN</td>
      <td>-0.032597</td>
    </tr>
    <tr>
      <th>005380</th>
      <td>-0.000620</td>
      <td>0.012489</td>
      <td>-0.013162</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>114570</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>080440</th>
      <td>0.050549</td>
      <td>0.077181</td>
      <td>0.077758</td>
    </tr>
    <tr>
      <th>058420</th>
      <td>0.227848</td>
      <td>0.060465</td>
      <td>0.189573</td>
    </tr>
    <tr>
      <th>347140</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>158310</th>
      <td>0.148148</td>
      <td>0.009050</td>
      <td>-0.212366</td>
    </tr>
  </tbody>
</table>
<p>2173 rows × 3 columns</p>
</div></div></div>
</div>
</div>
</div>
<div class="section" id="id13">
<h2>9.5.2 각 지표를 결합하기<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">if</span> <span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="o">.</span><span class="n">month</span> <span class="ow">in</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">):</span>
    <span class="n">num_col</span> <span class="o">=</span> <span class="n">KOR_fs</span><span class="p">[</span><span class="s1">&#39;매출액&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="o">.</span><span class="n">year</span> <span class="o">-</span> <span class="mi">2</span><span class="p">))</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">num_col</span> <span class="o">=</span> <span class="n">KOR_fs</span><span class="p">[</span><span class="s1">&#39;매출액&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="o">.</span><span class="n">year</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">KOR_fs</span><span class="p">[</span><span class="s1">&#39;매출액&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="p">[</span><span class="n">num_col</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>2019/12</th>
    </tr>
    <tr>
      <th>종목코드</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>005930</th>
      <td>2304009.0</td>
    </tr>
    <tr>
      <th>000660</th>
      <td>269907.0</td>
    </tr>
    <tr>
      <th>051910</th>
      <td>286250.0</td>
    </tr>
    <tr>
      <th>207940</th>
      <td>7016.0</td>
    </tr>
    <tr>
      <th>005380</th>
      <td>1057464.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th>114570</th>
      <td>124.0</td>
    </tr>
    <tr>
      <th>080440</th>
      <td>41.0</td>
    </tr>
    <tr>
      <th>058420</th>
      <td>114.0</td>
    </tr>
    <tr>
      <th>347140</th>
      <td>NaN</td>
    </tr>
    <tr>
      <th>158310</th>
      <td>101.0</td>
    </tr>
  </tbody>
</table>
<p>2173 rows × 1 columns</p>
</div></div></div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By 이현열<br/>
        
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>